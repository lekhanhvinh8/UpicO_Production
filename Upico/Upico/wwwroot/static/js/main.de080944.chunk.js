(this["webpackJsonpupico-app"]=this["webpackJsonpupico-app"]||[]).push([[0],{366:function(e,t,n){},367:function(e,t,n){},537:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(16),r=n.n(i),s=(n(366),n(25)),c=n(22),l=(n(367),n(6)),d=n(8),u=n(4),j=n(591),m=n(653),b=n(604),h=n(325),p=n(326),g=n(109),f=n(657),x=n(593),O=n(327),v=n(592),y=n(594),w=n(595),N=n(596),C=n(597),I=n(598),k=n.p+"static/media/logo.90047e80.jpg",S=n(218),R=Object(S.a)((function(e){return{root:{backgroundColor:"#2a3f54",position:"fixed",top:0,left:0,right:0,zIndex:1},container:{height:60,padding:"0 40px"},logo:{width:"60%",height:"auto",cursor:"pointer"},paper:{padding:"2px 4px",display:"flex",alignItems:"center",justifyContent:"center",width:300,height:25,borderRadius:3,"&:hover":{cursor:"text"}},searchBox:{position:"absolute",width:"120%",height:300,left:"-10%",top:40,flexDirection:"column",flexShrink:0,display:"none","&[active='1']":{display:"flex"},"&:before":{content:"''",position:"absolute",width:14,height:14,backgroundColor:"white",left:"50%",top:-7,transform:"rotate(45deg)"}},searchBoxContent:{display:"flex",flexGrow:1,alignItems:"center",justifyContent:"center"},input:{width:"20%","&[search='1']":{width:"100%"}},icon:{color:"#009688","&[icon='search']":{color:"lightgray"},fontSize:27},iconButton:{padding:5},avatarContainer:{padding:10,borderTopLeftRadius:2,borderTopRightRadius:2,display:"flex",alignItems:"center",cursor:"pointer"},avatar:{width:27,height:27,marginRight:10},user:{position:"absolute",right:0,bottom:-65,width:100,display:"none","&[active='1']":{display:"block"}},option:{display:"flex",alignItems:"center",padding:"5px 10px",cursor:"pointer","&:hover":{backgroundColor:"#d9d9d9"}},text:{fontSize:14,marginLeft:10},searchUser:{display:"flex",alignItems:"center",padding:"10px 20px",cursor:"pointer","&:hover":{backgroundColor:"#d9d9d9"}},progress:{width:"100%",height:"100%",textAlign:"center",alignItems:"center",display:"flex",justifyContent:"center"}}})),P=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1];return{loading:n,onLoading:function(){o(!0)},offLoading:function(){o(!1)}}},T=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1];return{isShowing:n,toggle:function(){o(!n)},onShowing:function(){o(!0)},offShowing:function(){o(!1)}}},L=n(19),E=n.n(L),D="/api/Users",B={register:function(e,t,n,a,o,i){return E.a.post(D,{username:e,password:t,email:n,firstname:a,lastname:o,fullname:i}).catch((function(e){return e.response}))},login:function(e,t){return E.a.post(D+"/authenticate",{username:e,password:t}).catch((function(e){return e.response}))},isLoggedIn:function(){return!!localStorage.getItem("token")},logout:function(){localStorage.removeItem("username"),localStorage.removeItem("token"),localStorage.removeItem("data")},getCurrentUser:function(){return localStorage.getItem("username")}},M={approveReport:function(e){return E.a.delete("/api/admin/delete?postId="+e)},rejectReport:function(e){return E.a.delete("/api/admin/pass?postId="+e)}};function z(){var e=localStorage.getItem("token");return e?{Authorization:"Bearer "+e}:{}}var U="/api/avatars/",A={getUserAvatar:function(e){return E.a.get(U+e+"/main",{headers:z()}).catch((function(e){return e.response}))},uploadAvatar:function(e,t){return E.a.post(U+e,t,{headers:z()}).catch((function(e){return e.response}))},deleteAvatar:function(e,t){return E.a.delete(U+e+"/"+t,{headers:z()}).catch((function(e){return e.response}))}},W={getComment:function(e){return E.a.get("/api/Comments/parents?postId="+e+"&numComments=5").catch((function(e){return e.response}))},getMoreComment:function(e,t){return E.a.get("/api/Comments/parents?postId="+e+"&lastCommentId="+t+"&numComments=4").catch((function(e){return e.response}))},getReply:function(e){return E.a.get("/api/Comments/childrens?parentId="+e+"&numComments=3").catch((function(e){return e.response}))},getMoreReply:function(e,t){return E.a.get("/api/Comments/childrens?parentId="+e+"&lastCommentId="+t+"&numComments=3").catch((function(e){return e.response}))},comment:function(e,t,n){return E.a.post("/api/Comments/comment",{username:e,content:t,postId:n}).catch((function(e){return e.response}))},replyComment:function(e,t,n){return E.a.post("/api/Comments/reply",{username:e,content:t,parentId:n}).catch((function(e){return e.response}))},deleteComment:function(e){return E.a.delete("/api/Comments?commentId="+e).catch((function(e){return e.response}))}},F={like:function(e,t){return E.a.post("/api/Likes?username="+e+"&postId="+t).catch((function(e){return e.response}))},dislike:function(e,t){return E.a.delete("/api/Likes?username="+e+"&postId="+t).catch((function(e){return e.response}))}},H={createPost:function(e,t){return E.a.post("/api/Posts",{userName:e,content:t}).catch((function(e){return e.response}))},getPostDetail:function(e,t){return E.a.get("/api/Posts?sourceUsername="+e+"&postId="+t).catch((function(e){return e.response}))},uploadImage:function(e,t){return E.a.post("/api/postedImages/"+e,t)},getPostUser:function(e){return E.a.get("/api/Posts/relatedPosts?username="+e+"&numPosts=10").catch((function(e){return e.response}))},getMorePost:function(e,t){return E.a.get("/api/Posts/moreRelatedPosts?username="+e+"&latestPostId="+t+"&numPosts=15").catch((function(e){return e.response}))},getPostProfile:function(e,t,n){return E.a.get("/api/Posts/UserProfilePosts?sourceUsername="+e+"&targetUsername="+t+"&numPosts=15&getImages="+n).catch((function(e){return e.response}))},getMorePostProfile:function(e,t,n,a){return E.a.get("/api/Posts/MoreUserProfilePosts?sourceUsername="+e+"&targetUsername="+t+"&latestPostId="+n+"&numPosts=15&getImages="+a).catch((function(e){return e.response}))},setPrivate:function(e){return E.a.put("/api/Posts?postId="+e+"&privateMode=true").catch((function(e){return e.response}))},setPublic:function(e){return E.a.put("/api/Posts?postId="+e+"&privateMode=false").catch((function(e){return e.response}))},deletePostImage:function(e){return E.a.delete("/api/postedImages/"+e).catch((function(e){return e.response}))},deletePost:function(e){return E.a.delete("/api/Posts?postId="+e).catch((function(e){return e.response}))},reportPost:function(e,t,n){return E.a.post("/api/Posts/report",{id:e,reporterUserName:t,reportContent:n}).catch((function(e){return e.response}))}},_={getUserInfo:function(e){return E.a.get("/api/Users/"+e,{headers:z()})},searchUser:function(e){return E.a.get("/api/Users?key="+e).catch((function(e){return e.response}))},getProfile:function(e,t){return E.a.get("/api/Users/profile?sourceUsername="+e+"&targetUsername="+t).catch((function(e){return e.response}))},follow:function(e,t){return E.a.get("/api/Users/follow?sourceUsername="+e+"&targetUsername="+t).catch((function(e){return e.response}))},unfollow:function(e,t){return E.a.get("/api/Users/unfollow?sourceUsername="+e+"&targetUsername="+t).catch((function(e){return e.response}))},updateProfile:function(e,t,n,a,o,i){return E.a.put("/api/Users/updateProfile",{userName:e,firstName:t,lastName:n,displayName:a,bio:o,phoneNumber:i}).catch((function(e){return e.response}))},changePassword:function(e,t,n,a){return E.a.put("/api/Users/changePassword",{userName:e,currentPassword:t,newPassword:n,newPasswordConfirm:a}).catch((function(e){return e.response}))},getSuggestion:function(e){return E.a.get("/api/Users/followingSuggestion?username="+e+"&numFollowings=5").catch((function(e){return e.response}))}},G=n(1),V=function(e){var t=e.isHome,n=R(),o=Object(a.useRef)(null),i=Object(a.useRef)(null),r=Object(a.useRef)(null),s=localStorage.getItem("username"),c=Object(a.useState)(!1),d=Object(l.a)(c,2),u=d[0],m=d[1],b=Object(a.useState)(0),S=Object(l.a)(b,2),T=S[0],L=S[1],E=Object(a.useState)([]),D=Object(l.a)(E,2),M=D[0],z=D[1],U=Object(a.useState)(""),W=Object(l.a)(U,2),F=W[0],H=W[1],V=Object(a.useState)(""),q=Object(l.a)(V,2),Y=q[0],$=q[1],J=P(),K=J.loading,X=J.onLoading,Z=J.offLoading;return Object(a.useEffect)((function(){A.getUserAvatar(s).then((function(e){200===e.status&&$(e.data.path)}));var e=function(e){i.current&&!i.current.contains(e.target)&&m(!1),r.current&&!r.current.contains(e.target)&&o.current&&!o.current.contains(e.target)&&L(0)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[i,r,o,s]),Object(G.jsx)("div",{className:n.root,children:Object(G.jsxs)(j.a,{container:!0,justify:"space-between",alignItems:"center",className:n.container,children:[Object(G.jsx)(j.a,{item:!0,children:Object(G.jsx)("img",{src:k,alt:"Logo",className:n.logo,onClick:function(){window.location.href=window.location.origin}})}),Object(G.jsxs)(j.a,{item:!0,style:{position:"relative"},children:[Object(G.jsxs)(h.a,{className:n.paper,onClick:function(){L(1),o.current.focus()},children:[Object(G.jsx)(v.a,{className:n.icon,icon:"search"}),Object(G.jsx)(p.a,{placeholder:"Search",className:n.input,search:T,inputRef:o,onChange:function(e){H(e.target.value),X(),_.searchUser(e.target.value).then((function(e){200===e.status&&(Z(),z(e.data))}))}})]}),Object(G.jsxs)(h.a,{className:n.searchBox,active:T?1:0,ref:r,children:[M.length>0?null:Object(G.jsx)("div",{style:{padding:20},children:Object(G.jsx)(g.a,{variant:"h6",style:{fontSize:16,fontWeight:"bold"},children:"Recently"})}),K?Object(G.jsx)("div",{className:n.progress,children:Object(G.jsx)(x.a,{size:30})}):M.length>0?Object(G.jsx)("div",{style:{marginTop:20,overflowY:"auto"},children:M.map((function(e){return Object(G.jsxs)("div",{className:n.searchUser,onClick:function(t){return function(e,t){window.location.href=window.location.origin+"/"+t}(0,e.username)},children:[Object(G.jsx)(f.a,{alt:"avatar",src:e.avatarUrl?e.avatarUrl:null}),Object(G.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(G.jsx)(g.a,{variant:"body1",className:n.text,style:{fontWeight:"bold"},children:e.username}),Object(G.jsx)(g.a,{variant:"body1",className:n.text,children:e.displayName})]})]},e.id)}))}):Object(G.jsx)("div",{className:n.searchBoxContent,children:Object(G.jsx)(g.a,{variant:"body1",style:{fontSize:14,fontWeight:"bold",color:"#8e8e8e",textAlign:"center"},children:F?"No result is found.":"No recent searches."})})]})]}),Object(G.jsxs)(j.a,{item:!0,style:{display:"flex",position:"relative"},children:[Object(G.jsx)(O.a,{className:n.iconButton,onClick:function(){window.location.href=window.location.origin},children:t?Object(G.jsx)(y.a,{className:n.icon}):Object(G.jsx)(w.a,{className:n.icon})}),Object(G.jsx)(O.a,{className:n.iconButton,children:Object(G.jsx)(N.a,{className:n.icon})}),Object(G.jsx)("div",{className:n.avatarContainer,onClick:function(){m(!u)},children:Object(G.jsx)(f.a,{alt:"avatar",src:Y,className:n.avatar})}),Object(G.jsxs)(h.a,{className:n.user,active:u?1:0,ref:i,children:[Object(G.jsxs)("div",{className:n.option,onClick:function(e){e.preventDefault(),window.location.href=window.location.origin+"/"+s},style:{borderTopLeftRadius:5,borderTopRightRadius:5},children:[Object(G.jsx)(C.a,{className:n.icon}),Object(G.jsx)(g.a,{className:n.text,children:"Profile"})]}),Object(G.jsxs)("div",{className:n.option,onClick:function(){B.logout(),window.location.reload()},style:{borderBottomLeftRadius:5,borderBottomRightRadius:5},children:[Object(G.jsx)(I.a,{className:n.icon}),Object(G.jsx)(g.a,{className:n.text,children:"Logout"})]})]})]})]})})},q=Object(S.a)((function(e){return{root:{},tabContainer:{backgroundColor:e.palette.background.paper,display:"flex",height:"auto",boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)",width:"60%",margin:"100px auto 0 auto"},tabs:{borderRight:"1px solid ".concat(e.palette.divider),minWidth:220},tabPanel:{width:"100%",padding:"30px 20px"},gridContainer:{display:"flex",flexDirection:"column"}}})),Y=n(658),$=n(539),J=n(328),K=n(546),X=Object(S.a)((function(e){return{gridItem:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",padding:"10px 0"},gridItemInfo:{marginLeft:20,flex:"2 0 0px"},avatar:{width:35,height:35,marginLeft:"auto",cursor:"pointer","&[loading='1']":{opacity:.5}},username:{fontSize:18,fontWeight:500,lineHeight:.5},action:{padding:0,margin:0,backgroundColor:"white",border:"none",color:"#3f51b5",cursor:"pointer",fontWeight:600,fontSize:12},infoText:{fontWeight:"bold",textAlign:"right",flex:"1 0 0px",fontSize:14},textField:{width:"75%"},textArea:{maxWidth:312,minWidth:312,width:312,maxHeight:312,minHeight:50,border:"1px solid rgba(0, 0, 0, 0.23)",borderRadius:4},input:{padding:"5px 10px"},description:{fontSize:12,fontWeight:400,color:"#8e8e8e",marginTop:10,width:"75%"},progress:{position:"absolute",color:"#009688"},progressAvatar:{position:"absolute",color:"#009688",right:10,top:10}}})),Z=Object(S.a)((function(){return{modalOverlay:{position:"fixed",top:0,left:0,zIndex:99,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},root:{position:"fixed",top:"50vh",left:"50%",width:"400px",zIndex:100,transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:15},text:{fontSize:18,fontWeight:"bold",padding:"20px 0"},option:{borderTop:"1px solid #d9d9d9",width:"100%",textAlign:"center",padding:"15px 0",fontSize:14,cursor:"pointer",fontWeight:"bold"}}})),Q=function(e){var t=e.isShowing,n=e.modalRef,o=e.toggleModal,i=e.onLoading,s=e.offLoading,c=e.setUser,l=Z(),u=Object(a.useRef)(null),j=localStorage.getItem("username");return document.body.style.overflow=t?"hidden":"auto",t?r.a.createPortal(Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:l.modalOverlay}),Object(G.jsxs)(h.a,{className:l.root,ref:n,children:[Object(G.jsx)(g.a,{variant:"body1",className:l.text,children:"Change Avatar"}),Object(G.jsx)("div",{className:l.option,style:{color:"#0095f6"},onClick:function(){u.current.click()},children:"Upload photo"}),Object(G.jsx)("input",{type:"file",hidden:!0,accept:"image/*",ref:u,onChange:function(e){var t=new FormData,n=localStorage.getItem("username");t.append("file",e.target.files[0]),o(),i(),A.uploadAvatar(n,t).then((function(e){200===e.status&&(c((function(t){return Object(d.a)(Object(d.a)({},t),{},{avatarUrl:e.data.path})})),s())}))}}),Object(G.jsx)("div",{className:l.option,style:{color:"#ed4956"},onClick:function(){o(),i(),A.getUserAvatar(j).then((function(e){if(200===e.status){var t=e.data.id;A.deleteAvatar(j,t).then((function(e){s()}))}}))},children:"Remove current photo"}),Object(G.jsx)("div",{className:l.option,onClick:function(){return o(!1)},children:"Cancel"})]})]}),document.body):null},ee=n(652),te=function(e){return Object(G.jsx)(ee.a,Object(d.a)({elevation:6,variant:"filled"},e))},ne=function(){var e=X(),t=Object(a.useRef)(null),n=Object(a.useState)({}),o=Object(l.a)(n,2),i=o[0],r=o[1],s=Object(a.useState)(!0),c=Object(l.a)(s,2),u=c[0],m=c[1],b=Object(a.useState)(!1),h=Object(l.a)(b,2),p=h[0],O=h[1],v=localStorage.getItem("username"),y=P(),w=y.loading,N=y.onLoading,C=y.offLoading,I=T(),k=I.isShowing,S=I.toggle,R=function(){S()},L=function(e,t){"clickaway"!==t&&O(!1)};return Object(a.useEffect)((function(){_.getProfile(v,v).then((function(e){200===e.status&0===Object.keys(i).length&&r(e.data)}));var e=function(e){t.current&&!t.current.contains(e.target)&&S()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[v,t,S,i]),Object(G.jsxs)("div",{children:[Object(G.jsx)(Q,{isShowing:k,toggleModal:S,modalRef:t,onLoading:N,offLoading:C,setUser:r}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsxs)("div",{style:{flex:"1 0 0px",position:"relative"},children:[Object(G.jsx)(f.a,{src:i.avatarUrl?i.avatarUrl:null,alt:"avatar",className:e.avatar,onClick:R,loading:w?1:0}),w?Object(G.jsx)(x.a,{size:14,className:e.progressAvatar}):null]}),Object(G.jsxs)("div",{className:e.gridItemInfo,children:[Object(G.jsx)(g.a,{variant:"body1",className:e.username,children:i.userName?i.userName:""}),Object(G.jsx)("button",{variant:"body1",className:e.action,onClick:R,children:"Change Avatar"})]})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)(g.a,{variant:"body1",className:e.infoText,children:"Display Name"}),Object(G.jsx)("div",{className:e.gridItemInfo,children:Object(G.jsx)(Y.a,{className:e.textField,variant:"outlined",InputProps:{classes:{input:e.input}},value:i.displayName?i.displayName:"",onChange:function(e){r(Object(d.a)(Object(d.a)({},i),{},{displayName:e.target.value})),e.target.value||m(!1),e.target.value&&i.phoneNumber.length>=10&&m(!0)}})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,style:{paddingTop:0},children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"}}),Object(G.jsx)("div",{style:{flex:"2 0 0px",marginLeft:20},children:Object(G.jsx)(g.a,{className:e.description,style:{marginTop:0},children:"Get a display name you use often to make your account easier to find. It can be your full name, nickname, or business name."})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,style:{alignItems:"flex-start"},children:[Object(G.jsx)(g.a,{variant:"body1",className:e.infoText,children:"Bio"}),Object(G.jsx)("div",{className:e.gridItemInfo,children:Object(G.jsx)($.a,{className:e.textArea,value:i.bio?i.bio:"",onChange:function(e){r(Object(d.a)(Object(d.a)({},i),{},{bio:e.target.value}))}})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"}}),Object(G.jsxs)("div",{style:{flex:"2 0 0px",marginLeft:20},children:[Object(G.jsx)(g.a,{variant:"body1",className:e.description,style:{fontWeight:"bold"},children:"Personal Information"}),Object(G.jsx)(g.a,{className:e.description,style:{marginTop:0},children:"Provide your personal information, regardless of whether you use the account for business, pets or otherwise. This information will not be visible on your public profile."})]})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)(g.a,{variant:"body1",className:e.infoText,children:"Firstname"}),Object(G.jsx)("div",{className:e.gridItemInfo,children:Object(G.jsxs)("div",{style:{width:"75%",display:"flex",alignItems:"center"},children:[Object(G.jsx)(Y.a,{variant:"outlined",InputProps:{classes:{input:e.input}},value:i.firstName?i.firstName:"",style:{width:"35%"},onChange:function(e){r(Object(d.a)(Object(d.a)({},i),{},{firstName:e.target.value}))}}),Object(G.jsx)(g.a,{variant:"body1",className:e.infoText,children:"Lastname"}),Object(G.jsx)(Y.a,{variant:"outlined",InputProps:{classes:{input:e.input}},value:i.lastName?i.lastName:"",style:{width:"35%",marginLeft:20},onChange:function(e){r(Object(d.a)(Object(d.a)({},i),{},{lastName:e.target.value}))}})]})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)(g.a,{variant:"body1",className:e.infoText,children:"Phone"}),Object(G.jsx)("div",{className:e.gridItemInfo,children:Object(G.jsx)(Y.a,{className:e.textField,variant:"outlined",InputProps:{classes:{input:e.input}},value:i.phoneNumber?i.phoneNumber:"",onChange:function(e){r(Object(d.a)(Object(d.a)({},i),{},{phoneNumber:e.target.value})),e.target.value.length<10&&m(!1),e.target.value.length>=10&&""!==i.displayname&&m(!0)},inputProps:{maxLength:12},onInput:function(e){e.target.value=e.target.value.replace(/[^0-9]/g,"")}})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)(g.a,{variant:"body1",className:e.infoText,children:"Email"}),Object(G.jsx)("div",{className:e.gridItemInfo,children:Object(G.jsx)(Y.a,{className:e.textField,variant:"outlined",InputProps:{classes:{input:e.input}},disabled:!0,value:i.email?i.email:""})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"}}),Object(G.jsx)("div",{style:{flex:"2 0 0px",marginLeft:20},children:Object(G.jsxs)(J.a,{color:"primary",variant:"contained",style:{textTransform:"inherit"},onClick:function(){N(),_.updateProfile(i.userName,i.firstName,i.lastName,i.displayName,i.bio,i.phoneNumber).then((function(e){200===e.status&&(C(),O(!0),document.body.style.overflow="auto")}))},disabled:!u||w,children:["Update",w?Object(G.jsx)(x.a,{size:20,className:e.progress}):null]})})]}),Object(G.jsx)(K.a,{open:p,autoHideDuration:3e3,onClose:L,children:Object(G.jsx)(te,{onClose:L,severity:"success",children:"Update profile successfully!"})})]})},ae=Object(S.a)((function(e){return{gridItem:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",padding:"10px 0"},gridItemInfo:{marginLeft:20,flex:"2 0 0px"},avatar:{width:35,height:35,marginLeft:"auto"},username:{fontSize:20,fontWeight:500,lineHeight:1},infoText:{fontWeight:"bold",textAlign:"right",flex:"1 0 0px",fontSize:14},textField:{width:"75%","& .MuiFormHelperText-root":{margin:"10px 0 0 0"}},input:{padding:"5px 10px"}}})),oe=Object(S.a)((function(e){return{root:{position:"absolute",bottom:0,left:0,width:"100vw",padding:"10px 20px",backgroundColor:"#262626",boxSizing:"border-box",color:"white",animation:"$slideFromBottom 0.5s linear",display:"none","&[active='1']":{display:"block"}},"@keyframes slideFromBottom":{"0%":{transform:"translateY(100%)"},"100%":{transform:"translateY(0)"}},"@keyframes slideToBottom":{"0%":{transform:"translateY(0)"},"100%":{transform:"translateY(100%)"}}}})),ie=function(e){var t=e.error,n=oe(),a=!0;return""!==t&&(a=!1,document.body.style.overflow="hidden"),Object(G.jsx)("div",{className:n.root,active:a?0:1,children:t})},re=function(e){return Object(G.jsx)(ee.a,Object(d.a)({elevation:6,variant:"filled"},e))},se=function(){var e=ae(),t=Object(a.useState)({}),n=Object(l.a)(t,2),o=n[0],i=n[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),c=s[0],d=s[1],u=Object(a.useState)(""),m=Object(l.a)(u,2),b=m[0],h=m[1],p=Object(a.useState)(""),x=Object(l.a)(p,2),O=x[0],v=x[1],y=Object(a.useState)(""),w=Object(l.a)(y,2),N=w[0],C=w[1],I=Object(a.useState)(!1),k=Object(l.a)(I,2),S=k[0],R=k[1],P=Object(a.useState)(!1),T=Object(l.a)(P,2),L=T[0],E=T[1],D=localStorage.getItem("username"),B=function(){var e=!0;return b!==O?(C("New password and old password do not match."),e=!1):RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})").test(b)?C(""):(C("Password must be six charaters and contain at least lowercase character, uppercase character, numeric character."),e=!1),e},M=function(e,t){"clickaway"!==t&&E(!1)};return Object(a.useEffect)((function(){_.getProfile(D,D).then((function(e){200===e.status&&i(e.data)}))}),[D]),Object(G.jsxs)("div",{children:[Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)("div",{style:{flex:"1 0 0px"},children:Object(G.jsx)(f.a,{src:o.avatarUrl?o.avatarUrl:null,alt:"avatar",className:e.avatar})}),Object(G.jsx)("div",{className:e.gridItemInfo,children:Object(G.jsx)(g.a,{variant:"body1",className:e.username,children:o.userName?o.userName:""})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)(g.a,{variant:"body1",className:e.infoText,children:"Old password"}),Object(G.jsx)("div",{className:e.gridItemInfo,children:Object(G.jsx)(Y.a,{className:e.textField,variant:"outlined",type:"password",InputProps:{classes:{input:e.input}},value:c,onChange:function(e){d(e.target.value),""!==e.target.value&""!==b&""!==O?R(!0):R(!1)},FormHelperTextProps:{classes:{root:e.helperText}}})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)(g.a,{variant:"body1",className:e.infoText,children:"New password"}),Object(G.jsx)("div",{className:e.gridItemInfo,children:Object(G.jsx)(Y.a,{className:e.textField,variant:"outlined",type:"password",InputProps:{classes:{input:e.input}},value:b,onChange:function(e){h(e.target.value),""!==c&""!==e.target.value&""!==O?R(!0):R(!1)}})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)(g.a,{variant:"body1",className:e.infoText,children:"Confirm password"}),Object(G.jsx)("div",{className:e.gridItemInfo,children:Object(G.jsx)(Y.a,{className:e.textField,variant:"outlined",type:"password",InputProps:{classes:{input:e.input}},value:O,onChange:function(e){v(e.target.value),""!==c&""!==b&""!==e.target.value?R(!0):R(!1)}})})]}),Object(G.jsxs)(j.a,{item:!0,className:e.gridItem,children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"}}),Object(G.jsx)("div",{style:{flex:"2 0 0px",marginLeft:20},children:Object(G.jsx)(J.a,{color:"primary",variant:"contained",style:{textTransform:"inherit"},onClick:function(e){e.preventDefault(),B()&&(_.changePassword(D,c,b,O).then((function(e){404===e.status?(document.body.style.overflow="hidden",C("Your current password is incorrect.")):C(""),400===e.status&&(document.body.style.overflow="hidden",C("The new password and the current password cannot be the same.")),200===e.status&&(E(!0),C(""),d(""),h(""),v(""))})),document.body.style.overflow="auto")},disabled:!S,children:"Change password"})})]}),Object(G.jsx)(ie,{error:N}),Object(G.jsx)(K.a,{open:L,autoHideDuration:3e3,onClose:M,children:Object(G.jsx)(re,{onClose:M,severity:"success",children:"Change password successfully!"})})]})},ce=["children","value","index"];function le(e){var t=e.children,n=e.value,a=e.index,o=Object(u.a)(e,ce),i=q();return Object(G.jsx)("div",Object(d.a)(Object(d.a)({role:"tabpanel",hidden:n!==a,id:"vertical-tabpanel-".concat(a),"aria-labelledby":"vertical-tab-".concat(a)},o),{},{children:n===a&&Object(G.jsx)(j.a,{container:!0,className:i.gridContainer,children:t})}))}function de(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var ue=function(){var e=q(),t=Object(a.useState)(0),n=Object(l.a)(t,2),o=n[0],i=n[1];return Object(G.jsxs)("div",{className:e.root,children:[Object(G.jsx)(V,{}),Object(G.jsxs)("div",{className:e.tabContainer,children:[Object(G.jsxs)(m.a,{orientation:"vertical",variant:"scrollable",value:o,onChange:function(e,t){i(t)},className:e.tabs,TabIndicatorProps:{style:{backgroundColor:"#3f51b5",left:0}},children:[Object(G.jsx)(b.a,Object(d.a)({style:{textTransform:"initial"},label:"Personal Information"},de(0))),Object(G.jsx)(b.a,Object(d.a)({style:{textTransform:"initial"},label:"Change Password"},de(1)))]}),Object(G.jsx)(le,{value:o,index:0,className:e.tabPanel,children:Object(G.jsx)(ne,{})}),Object(G.jsx)(le,{value:o,index:1,className:e.tabPanel,children:Object(G.jsx)(se,{})})]})]})},je=n(210),me=n.n(je),be=n(287),he=n(14),pe=n(605),ge=n(609),fe=n(610),xe=n(611),Oe=n(612),ve=n(613),ye=Object(S.a)((function(e){return{root:{},avatarContainer:{backgroundColor:"#2a3f54",padding:10,borderTopLeftRadius:2,borderTopRightRadius:2,display:"flex",alignItems:"center"},avatar:{width:27,height:27,marginRight:10,cursor:"pointer"},name:{fontSize:12,color:"#009688",fontWeight:"bold"},content:{padding:"10px 15px"},text:{fontSize:14},image:{width:"100%",objectFit:"cover"},likeComment:{padding:"5px 15px",display:"flex",alignItems:"center",position:"relative"},button:{display:"flex",alignItems:"center",marginRight:10},icon:{marginRight:5,color:"#009688"},comment:{padding:"0 15px",borderTop:"1px solid #cecece",marginTop:10,display:"flex",alignItems:"center"},textField:{marginTop:5,width:"100%","& .MuiInput-underline:after":{borderBottom:"none"},"& .MuiInput-underline:before":{borderBottom:"none"},"&:hover .MuiInput-underline:before":{borderBottom:"none"}},commentButton:{cursor:"pointer"},slideIcon:{position:"absolute",top:"50%",padding:0,backgroundColor:"rgba(0, 0, 0, 0.4)",color:"white",border:"none",borderRadius:"50%"},previewImage:{width:"100%",height:"100%",objectFit:"cover"},dot:{padding:5,backgroundColor:"#bbb",borderRadius:"50%",marginLeft:4,"&[active='1']":{backgroundColor:"#009688"}},moreButton:{cursor:"pointer",marginLeft:"auto",color:"#009688"},showMore:{padding:"0 15px"},showMoreButton:{color:"#8e8e8e",background:"0 0",border:0,cursor:"pointer",fontSize:12,fontWeight:"bold",width:"auto",padding:0}}})),we=Object(S.a)((function(e){return{avatar:{width:27,height:27,marginRight:10,cursor:"pointer"},comment:{display:"flex",padding:"0 15px",alignItems:"flex-start",marginBottom:10},displayName:{fontWeight:"bold",fontSize:14,marginRight:10,textDecoration:"none","&:visited":{color:"inherit"}},timeAgo:{color:"#8e8e8e",fontSize:12,fontWeight:"400",marginRight:5},button:{color:"#8e8e8e",background:"0 0",border:0,cursor:"pointer",fontSize:12,fontWeight:"bold",width:"auto",padding:0,marginLeft:5},moreButton:{marginLeft:"auto",color:"#8e8e8e",cursor:"pointer"},divider:{borderBottom:"1px solid rgba(var(--f52,142,142,142),1)",display:"inline-block",height:0,marginRight:16,verticalAlign:"middle",width:24},showReplyButton:{color:"#8e8e8e",background:"0 0",border:0,cursor:"pointer",fontSize:12,fontWeight:"bold",width:"auto",padding:0},textField:{marginTop:5,width:"100%",padding:0,"& .MuiInput-underline input":{padding:0},"& .MuiInput-underline:after":{borderBottom:"none"},"& .MuiInput-underline:before":{borderBottom:"none"},"&:hover .MuiInput-underline:before":{borderBottom:"none"}},paper:{padding:"2px 15px",borderRadius:"50px",width:"100%"},reply:{display:"flex",alignItems:"flex-start",padding:"0 15px",margin:"10px 0 10px 35px"}}})),Ne=n(62),Ce=n(170),Ie=Object(S.a)((function(){return{modalOverlay:{position:"fixed",top:0,left:0,zIndex:99,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},root:{position:"fixed",top:"50vh",left:"50%",width:"400px",zIndex:100,transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:15},option:{borderTop:"1px solid #d9d9d9",width:"100%",textAlign:"center",padding:"15px 0",fontSize:14,cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},iconContainer:{display:"flex",alignItems:"center",flex:"1.1 0 0px"},icon:{marginRight:10},checkIcon:{fontSize:14,marginLeft:5,color:Ce.a[500]}}})),ke=Object(S.a)((function(e){return{root:{position:"fixed",top:0,left:0,zIndex:105,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},progress:{position:"absolute",top:"50%",left:"50%",zIndex:106}}})),Se=function(){var e=ke();return Object(G.jsx)("div",{className:e.root,children:Object(G.jsx)(x.a,{size:40,className:e.progress})})},Re=function(e){var t=e.isShowing,n=e.modalRef,o=e.toggleModal,i=e.auth,s=e.commentId,c=e.setComments,l=e.commentIndex,d=Ie(),u=P(),j=u.loading,m=u.onLoading,b=u.offLoading;t&&(document.body.style.overflow="hidden");return Object(a.useEffect)((function(){var e=function(e){n.current&&!n.current.contains(e.target)&&(o(),document.body.style.overflow="auto")};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[n,o]),t?r.a.createPortal(Object(G.jsxs)("div",{children:[j?Object(G.jsx)(Se,{}):null,Object(G.jsx)("div",{className:d.modalOverlay}),Object(G.jsxs)(h.a,{className:d.root,ref:n,children:[i?Object(G.jsx)("div",{className:d.option,style:{color:"#ed4956",borderRadius:15},onClick:function(){o(),m(),W.deleteComment(s).then((function(e){200===e.status&&(c((function(e){var t=Object(he.a)(e);return t.splice(l,1),t})),b()),document.body.style.overflow="auto"}))},children:"Remove"}):Object(G.jsx)("div",{className:d.option,style:{color:"#ed4956",borderRadius:15},children:"Report"}),Object(G.jsx)("div",{className:d.option,style:{borderRadius:0},onClick:function(){o(),document.body.style.overflow="auto"},children:"Cancel"})]})]}),document.body):null},Pe=function(e){var t=e.comment,n=e.index,o=e.setComments,i=we(),r=Object(a.useRef)(null),s=Object(a.useState)(!1),c=Object(l.a)(s,2),u=c[0],j=c[1],m=Object(a.useState)(!1),b=Object(l.a)(m,2),p=b[0],x=b[1],O=Object(a.useState)([]),v=Object(l.a)(O,2),y=v[0],w=v[1],N=Object(a.useState)(t.replies>0?"Show "+t.replies+" replies":0===t.replies?"Hide replies":"Show replies"),C=Object(l.a)(N,2),I=C[0],k=C[1],S=Object(a.useState)(""),R=Object(l.a)(S,2),P=R[0],T=R[1],L=Object(a.useState)(!1),E=Object(l.a)(L,2),D=E[0],B=E[1],M=Object(a.useState)(!1),z=Object(l.a)(M,2),U=z[0],F=z[1],H=localStorage.getItem("username"),_=function(){F(!U)};return Object(a.useEffect)((function(){t.replies>0&&0===y.length&&W.getReply(t.id).then((function(e){200===e.status&&w(e.data)}))}),[t,y]),Object(G.jsxs)("div",{children:[Object(G.jsx)(Re,{isShowing:U,toggleModal:_,modalRef:r,auth:D,commentId:D?t.id:null,setComments:o,commentIndex:n}),Object(G.jsxs)("div",{className:i.comment,children:[Object(G.jsx)(f.a,{alt:"avatar",src:t.userAvatarUrl?t.userAvatarUrl:P,className:i.avatar,onClick:function(){window.location.href=window.location.origin+"/"+t.username}}),Object(G.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[Object(G.jsxs)("div",{style:{display:"flex",position:"relative",flexWrap:"wrap"},children:[Object(G.jsx)("a",{href:"/"+t.username,className:i.displayName,children:t.userDisplayName}),Object(G.jsx)(g.a,{varian:"body1",style:{fontSize:14,wordBreak:"break-word",maxWidth:"80%"},children:t.content}),Object(G.jsx)(pe.a,{className:i.moreButton,onClick:function(e){e.preventDefault(),t.username===H?(B(!0),_()):(B(!1),_())}})]}),Object(G.jsxs)("div",{children:[Object(G.jsx)(Ne.a,{date:t.dateCreate,className:i.timeAgo,title:null,live:!1}),Object(G.jsx)("button",{className:i.button,onClick:function(){j(!u),A.getUserAvatar(H).then((function(e){404===e.status?T(null):T(e.data.path)}))},children:"Reply"})]})]})]}),t.replies>0&&Object(G.jsx)("div",{className:i.reply,children:Object(G.jsxs)("button",{className:i.showReplyButton,onClick:function(){if(y.length<t.replies&&p){var e=y[0].id;W.getMoreReply(t.id,e).then((function(e){if(200===e.status){w((function(t){return e.data.concat(t)}));var n=t.replies-y.length-e.data.length;k(n>0?"Show more "+n+" replies":"Hide replies")}}))}else y.length===t.replies&&p?(k("Show replies"),x(!1)):(x(!0),y.length===t.replies?k("Hide replies"):k("Show more "+(t.replies-y.length)+" replies"))},children:[Object(G.jsx)("div",{className:i.divider}),Object(G.jsx)("span",{children:I})]})}),p&(null===y||void 0===y?void 0:y.length)>0?null===y||void 0===y?void 0:y.map((function(e){return Object(G.jsxs)("div",{className:i.reply,children:[Object(G.jsx)(f.a,{alt:"avatar",src:e.userAvatarUrl?e.userAvatarUrl:P,className:i.avatar,style:{width:25,height:25},onClick:function(){window.location.href=window.location.origin+"/"+e.username}}),Object(G.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[Object(G.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(G.jsx)("a",{href:"/"+e.username,className:i.displayName,children:e.userDisplayName}),Object(G.jsx)(g.a,{varian:"body1",style:{fontSize:14,overflowWrap:"break-word",maxWidth:"80%"},children:e.content})]}),Object(G.jsx)(Ne.a,{date:e.dateCreate,className:i.timeAgo,title:null,live:!1})]})]},e.id)})):null,u?Object(G.jsxs)("div",{className:i.reply,style:{alignItems:"center"},children:[Object(G.jsx)(f.a,{alt:"avatar",src:P,className:i.avatar,style:{width:25,height:25}}),Object(G.jsx)(h.a,{className:i.paper,children:Object(G.jsx)(Y.a,{className:i.textField,placeholder:"Reply something...",multiline:!0,rows:1,rowsMax:3,onKeyDown:function(e){return function(e){if("Enter"===e.key){e.preventDefault();var n=localStorage.getItem("username"),a=e.target.value,i=e.target.id;W.replyComment(n,a,i).then((function(e){200===e.status&&(t.replies<=3?k("Hide replies"):k("Show more replies"),w([].concat(Object(he.a)(y),[e.data])),o((function(e){return e.map((function(e){return e.id===i?Object(d.a)(Object(d.a)({},e),{},{replies:e.replies+1}):e}))})),j(!1),x(!0))}))}}(e)},id:t.id})})]}):null]})},Te=n(606),Le=n(607),Ee=n(608),De=function(e){var t=e.isShowing,n=e.toggleModal,o=e.postId,i=e.auth,s=e.privateMode,c=e.setPosts,d=e.postIndex,u=e.onLoading,j=e.offLoading,m=Ie(),b=Object(a.useRef)(null),p=Object(a.useState)(!1),g=Object(l.a)(p,2),f=g[0],x=g[1],O=Object(a.useState)(!1),v=Object(l.a)(O,2),y=v[0],w=v[1],N=Object(a.useState)(!1),C=Object(l.a)(N,2),I=C[0],k=C[1],S=localStorage.getItem("username"),R=function(e,t){"clickaway"!==t&&(k(!1),w(!1))};return t&&(document.body.style.overflow="hidden"),Object(a.useEffect)((function(){var e=function(e){b.current&&!b.current.contains(e.target)&&(n(),x(!1),document.body.style.overflow="auto")};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[b,n]),t?r.a.createPortal(Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:m.modalOverlay}),Object(G.jsxs)(h.a,{className:m.root,ref:b,children:[i?Object(G.jsxs)("div",{style:{width:"100%"},children:[Object(G.jsxs)("div",{className:m.option,style:{color:"#0095f6",borderRadius:15},onClick:function(){u(),n(),H.setPrivate(o).then((function(e){200===e.status&&(c((function(e){var t=Object(he.a)(e),n=t[d];return n.privateMode=!0,t[d]=n,t})),j()),document.body.style.overflow="auto"}))},children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"},children:Object(G.jsx)(Te.a,{className:m.icon})}),Object(G.jsxs)("div",{className:m.iconContainer,children:["Private",s&&Object(G.jsx)(Le.a,{className:m.checkIcon})]})]}),Object(G.jsxs)("div",{className:m.option,style:{color:"#0095f6"},onClick:function(){u(),n(),H.setPublic(o).then((function(e){200===e.status&&(c((function(e){var t=Object(he.a)(e),n=t[d];return n.privateMode=!1,t[d]=n,t})),j()),document.body.style.overflow="auto"}))},children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"},children:Object(G.jsx)(Ee.a,{className:m.icon})}),Object(G.jsxs)("div",{className:m.iconContainer,children:["Public",!s&&Object(G.jsx)(Le.a,{className:m.checkIcon})]})]}),Object(G.jsx)("div",{className:m.option,style:{color:"#ed4956"},onClick:function(){u(),n(),H.deletePostImage(o).then((function(e){200===e.status&&H.deletePost(o).then((function(e){200===e.status&&(c((function(e){var t=Object(he.a)(e);return t.splice(d,1),t})),j())})),document.body.style.overflow="auto"}))},children:"Remove"})]}):f?Object(G.jsx)("div",{className:m.option,style:{borderRadius:15},children:"Please select a problem"}):Object(G.jsx)("div",{className:m.option,style:{color:"#ed4956",borderRadius:15},onClick:function(){x(!0)},children:"Report"}),f?["Nudity","Violence","Harassment","Suicide or Self-injury","False information","Spam","Unauthorized Sales","Hate speech","Terrorism","Gross content","Child Abuse"].map((function(e){return Object(G.jsx)("div",{className:m.option,style:{borderRadius:15,fontWeight:400},onClick:function(t){return function(e,t){u(),n(),H.reportPost(o,S,t).then((function(e){200===e.status&&(w(!0),j()),400===e.status&&(k(!0),j()),document.body.style.overflow="auto"}))}(0,e)},children:e},e)})):null,Object(G.jsx)("div",{className:m.option,onClick:function(){x(!1),n(),document.body.style.overflow="auto"},children:"Cancel"})]})]}),document.body):Object(G.jsxs)("div",{children:[Object(G.jsx)(K.a,{open:y,autoHideDuration:3e3,onClose:R,children:Object(G.jsx)(ee.a,{onClose:R,severity:"success",children:"Success! We will inspect your report!"})}),Object(G.jsx)(K.a,{open:I,autoHideDuration:3e3,onClose:R,children:Object(G.jsx)(ee.a,{onClose:R,severity:"error",children:"You already have reported this post!"})})]})},Be=function(e){var t=e.post,n=e.setPosts,o=e.postIndex,i=ye(),r=Object(a.useState)(t.likes),s=Object(l.a)(r,2),c=s[0],d=s[1],u=Object(a.useState)(t.isLiked),j=Object(l.a)(u,2),m=j[0],b=j[1],p=Object(a.useState)(""),x=Object(l.a)(p,2),O=x[0],v=x[1],y=Object(a.useState)([]),w=Object(l.a)(y,2),C=w[0],I=w[1],k=Object(a.useState)(0),S=Object(l.a)(k,2),R=S[0],L=S[1],E=[],D=t.id,B=localStorage.getItem("username"),M=T(),z=M.isShowing,U=M.toggle,A=P(),H=A.loading,_=A.onLoading,V=A.offLoading,q=function(){F.like(B,D).then((function(e){400===e.status?F.dislike(B,D).then((function(e){d(c-1),b(!1)})):(d(c+1),b(!0))}))};return t.postImages.length>0&&t.postImages.map((function(e){return E=[].concat(Object(he.a)(E),[e.url])})),Object(a.useEffect)((function(){0===C.length&&t.comments>0&&W.getComment(D).then((function(e){I(e.data)}))}),[D,C,t]),Object(G.jsxs)(h.a,{className:i.root,children:[H?Object(G.jsx)(Se,{}):null,Object(G.jsx)(De,{isShowing:z,toggleModal:U,postId:t.id,auth:t.username===B,privateMode:t.privateMode,setPosts:n,postIndex:o,onLoading:_,offLoading:V}),Object(G.jsxs)("div",{className:i.avatarContainer,children:[Object(G.jsx)(f.a,{alt:"avatar",src:t.avatarUrl?t.avatarUrl:null,className:i.avatar,onClick:function(){window.location.href=window.location.origin+"/"+t.username}}),Object(G.jsx)("a",{href:"/"+t.username,style:{textDecoration:"none"},className:i.name,children:t.displayName}),Object(G.jsx)(pe.a,{className:i.moreButton,onClick:U})]}),Object(G.jsx)("div",{className:i.content,children:Object(G.jsx)(g.a,{variant:"body1",className:i.text,children:t.content})}),E.length>0?E.length>1?Object(G.jsxs)("div",{style:{position:"relative"},children:[Object(G.jsx)(ge.a,{onClick:function(){var e=R-1;L(e<0?E.length-1:e)},className:i.slideIcon,style:{left:0}}),Object(G.jsx)(fe.a,{onClick:function(){L((R+1)%E.length)},className:i.slideIcon,style:{right:5}}),Object(G.jsx)("img",{src:E[R],alt:R,className:i.previewImage})]}):Object(G.jsx)("img",{src:E,alt:"previewImage"}):null,Object(G.jsxs)("div",{className:i.likeComment,children:[Object(G.jsxs)("div",{className:i.button,children:[m?Object(G.jsx)(xe.a,{className:i.icon,style:{cursor:"pointer"},onClick:q}):Object(G.jsx)(N.a,{className:i.icon,style:{cursor:"pointer"},onClick:q}),Object(G.jsx)(g.a,{style:{color:"#2a3f54",fontWeight:"bold"},children:0===c?c:c>1?c+" likes":c+" like"})]}),Object(G.jsxs)("div",{className:i.button,style:{cursor:"pointer"},children:[Object(G.jsx)(Oe.a,{className:i.icon}),Object(G.jsx)(g.a,{style:{color:"#2a3f54",fontWeight:"bold"},children:0===t.comments?t.comments:t.comments>1?t.comments+" comments":t.comments+" comment"})]}),E.length>1&&E.length<=6&&Object(G.jsx)("div",{className:i.button,style:{position:"absolute",right:10},children:E.map((function(e,t){return Object(G.jsx)("span",{className:i.dot,active:t===R?"1":"0"},e)}))})]}),Object(G.jsxs)("div",{style:{marginTop:10},children:[C.length>0&&C.map((function(e,t){return Object(G.jsx)(Pe,{comment:e,setComments:I,index:t},t)})),C.length<t.comments&&Object(G.jsx)("div",{className:i.showMore,children:Object(G.jsx)("button",{className:i.showMoreButton,onClick:function(){var e=C[C.length-1].id;W.getMoreComment(D,e).then((function(e){200===e.status&&I((function(t){return t.concat(e.data)}))}))},children:Object(G.jsx)("span",{children:"Show more comments"})})})]}),Object(G.jsxs)("div",{className:i.comment,children:[Object(G.jsx)(Y.a,{className:i.textField,placeholder:"Write a comment...",multiline:!0,rows:2,rowsMax:4,onChange:function(e){v(e.target.value)},value:O}),Object(G.jsx)("div",{className:i.commentButton,onClick:function(){""!==O&&(W.comment(B,O,D).then((function(e){I((function(t){return[e.data].concat(Object(he.a)(t))}))})),n((function(e){var t=Object(he.a)(e),n=t[o];return n.comments+=1,t[o]=n,t})),v(""))},children:Object(G.jsx)(ve.a,{className:i.icon})})]})]})},Me=Object(S.a)((function(e){return{root:{width:"15%",position:"fixed",top:100,right:40},header:{backgroundColor:"#2a3f54",padding:10,borderTopLeftRadius:2,borderTopRightRadius:2},headerText:{fontSize:13,color:"#009688",fontWeight:"bold"},container:{display:"flex",flexDirection:"column",padding:10,justifyContent:"space-between"},suggest:{display:"flex",justifyContent:"center",alignItems:"center",marginBottom:10},info:{width:"100%"},avatar:{width:40,height:40,marginRight:10,cursor:"pointer"},name:{fontSize:12,fontWeight:"bold",cursor:"pointer"},desc:{fontSize:12,color:"#8E8E8E"},icon:{color:"#009688",float:"right",cursor:"pointer"}}})),ze=function(e){var t=e.suggest,n=Me(),o=Object(a.useState)(!1),i=Object(l.a)(o,2),r=i[0],s=i[1],c=localStorage.getItem("username");return Object(G.jsxs)("div",{className:n.suggest,children:[Object(G.jsx)(f.a,{alt:"avatar",src:t.avatarUrl?t.avatarUrl:null,className:n.avatar,onClick:function(){window.location.href=window.location.origin+"/"+t.userName}}),Object(G.jsxs)("div",{className:n.info,children:[Object(G.jsx)(g.a,{className:n.name,onClick:function(){window.location.href=window.location.origin+"/"+t.userName},children:t.displayName?t.displayName:t.userName}),Object(G.jsx)(g.a,{className:n.desc,children:t.bio})]}),r?Object(G.jsx)(xe.a,{className:n.icon,onClick:function(e){return n=t.userName,void _.unfollow(c,n).then((function(e){200===e.status&&s(!1)}));var n},username:t.userName}):Object(G.jsx)(N.a,{className:n.icon,onClick:function(e){return n=t.userName,void _.follow(c,n).then((function(e){200===e.status&&s(!0)}));var n},username:t.userName})]})},Ue=function(e){var t=e.suggests,n=Me();return Object(G.jsxs)(h.a,{className:n.root,children:[Object(G.jsx)("div",{className:n.header,children:Object(G.jsx)(g.a,{className:n.headerText,children:"Suggestions for you"})}),Object(G.jsx)("div",{className:n.container,children:t.length>0&&t.map((function(e,t){return Object(G.jsx)(ze,{suggest:e},t)}))})]})},Ae=n(616),We=n(615),Fe=Object(S.a)((function(e){return{root:{width:"15%",borderRadius:2,position:"fixed"},avatarContainer:{backgroundColor:"#2a3f54",padding:10,borderTopLeftRadius:2,borderTopRightRadius:2,display:"flex",alignItems:"center"},avatar:{width:30,height:30,marginRight:10},name:{fontSize:13,color:"#009688",fontWeight:"bold"},content:{padding:10,display:"flex",alignItems:"center"},button:{width:20,height:20,borderRadius:2,border:"1px solid #eeeeee",padding:5,marginRight:10,cursor:"pointer","&:hover":{backgroundColor:"#009688"},"&:hover svg":{color:"white"}},icon:{color:"#009688",width:20,height:20}}})),He=n(614),_e=n(64),Ge=n.n(_e),Ve=n(288),qe=n.n(Ve);function Ye(e){var t=Object(S.a)((function(e){return{title:{color:"black",marginRight:10,fontWeight:600,fontSize:25}}}))(),n=Object(a.useState)(null),o=Object(l.a)(n,2),i=o[0],r=o[1],s=Object(a.useState)(!1),c=Object(l.a)(s,2),d=c[0],u=c[1],m=function(e){if(e)return 1===e.length?Object(G.jsx)("div",{justify:"center",style:{backgroundImage:"url(".concat(e[0]),backgroundSize:"cover",width:"100%",height:300,marginLeft:20,backgroundRepeat:"no-repeat",backgroundPosition:"center"}}):Object(G.jsx)(qe.a,{dots:!0,arrows:!1,children:e.map((function(e){return b(e)?Object(G.jsx)(j.a,{item:!0,md:12,lg:12,xl:12,xs:12,sm:12,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(G.jsx)("video",{width:"100%",height:"auto",src:e,controls:!0})})}):Object(G.jsx)(j.a,{item:!0,md:12,lg:12,xl:12,xs:12,sm:12,children:Object(G.jsx)("div",{direction:"row",justify:"center",style:{backgroundImage:"url(".concat(e),backgroundSize:"cover",width:"100%",height:300,backgroundRepeat:"no-repeat",backgroundPosition:"center",textAlign:"left"},onDoubleClick:function(){r(e)},children:Object(G.jsx)(O.a,{onClick:function(){u(!1)},children:Object(G.jsx)(Ge.a,{})})})})}))})},b=function(e){return!(!e.includes(".mp4")&&!e.includes(".mov"))},h=function(e){var t=!1;return e.map((function(e){return(e.includes(".mp4")||e.includes(".mov"))&&(console.log("checking videos",e),t=!0),e})),t},p=function(n){if(n)return 1===n.length?b(n[0])?Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",children:Object(G.jsx)("video",{width:"95%",height:"300",src:n[0],controls:!0})}):Object(G.jsx)("div",{justify:"center",style:{backgroundImage:"url(".concat(n[0]),backgroundSize:"cover",width:"100%",height:300,backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:Object(G.jsx)(Ge.a,{style:{position:"absolute",right:10,cursor:"pointer",color:"#ed4956"},onClick:function(){e.setData([]),e.setFiles(null)}})}):2===n.length?h(n)?Object(G.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(e,t){return b(e)?Object(G.jsx)(j.a,{item:!0,md:12,lg:12,xl:12,xs:12,sm:12,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",children:Object(G.jsx)("video",{width:"100%",height:"290",src:e,controls:!0})})}):Object(G.jsx)(j.a,{item:!0,md:12,lg:12,xl:12,xs:12,sm:12,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(e),width:"auto",height:200,borderRadius:5,marginBottom:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},onDoubleClick:function(){r(e)}})})}))}):Object(G.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(t,a){return Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(t),width:"auto",height:300,borderRadius:5,marginBottom:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",position:"relative"},onDoubleClick:function(){r(t)},children:Object(G.jsx)(Ge.a,{style:{position:"absolute",right:5,top:5,cursor:"pointer",color:"#ed4956"},onClick:function(){var t=Object(he.a)(n);t.splice(a,1),e.setData(t),e.setFiles((function(e){var t=Object(he.a)(e);return t.splice(a,1),t}))}})})},a)}))}):3===n.length?Object(G.jsxs)(j.a,{container:!0,spacing:1,children:[Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(n[0]),height:300,borderRadius:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",position:"relative"},onDoubleClick:function(){r(n[0])},children:Object(G.jsx)(Ge.a,{style:{position:"absolute",top:5,right:5,cursor:"pointer",color:"#ed4956"},onClick:function(){var t=Object(he.a)(n);t.splice(0,1),e.setData(t),e.setFiles((function(e){var t=Object(he.a)(e);return t.splice(0,1),t}))}})})}),Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:n.map((function(t,a){return 0!==a?b(t)?Object(G.jsx)(j.a,{item:!0,md:12,lg:12,xl:12,xs:12,sm:12,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",children:Object(G.jsx)("video",{width:"100%",height:"auto",style:{maxHeight:205},src:t,controls:!0})})}):Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(t),width:"auto",height:145,borderRadius:5,marginBottom:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",position:"relative"},onDoubleClick:function(){r(t)},children:Object(G.jsx)(Ge.a,{style:{position:"absolute",top:5,right:5,cursor:"pointer",color:"#ed4956"},onClick:function(){var t=Object(he.a)(n);t.splice(a,1),e.setData(t),e.setFiles((function(e){var t=Object(he.a)(e);return t.splice(a,1),t}))}})},a):null}))})]}):4===n.length?Object(G.jsxs)(j.a,{container:!0,spacing:1,children:[Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(n[0]),height:300,borderRadius:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",position:"relative"},onDoubleClick:function(){r(n[0])},children:Object(G.jsx)(Ge.a,{style:{position:"absolute",top:5,right:5,cursor:"pointer",color:"#ed4956"},onClick:function(){var t=Object(he.a)(n);t.splice(0,1),e.setData(t),e.setFiles((function(e){var t=Object(he.a)(e);return t.splice(0,1),t}))}})})}),Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:n.map((function(t,a){return 0!==a?b(t)?Object(G.jsx)(j.a,{item:!0,md:12,lg:12,xl:12,xs:12,sm:12,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",children:Object(G.jsx)("video",{width:"100%",height:"auto",src:t,controls:!0})})}):Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(t),width:"auto",height:95,borderRadius:5,marginBottom:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",position:"relative"},onDoubleClick:function(){r(t)},children:Object(G.jsx)(Ge.a,{style:{position:"absolute",top:5,right:5,cursor:"pointer",color:"#ed4956"},onClick:function(){var t=Object(he.a)(n);t.splice(a,1),e.setData(t),e.setFiles((function(e){var t=Object(he.a)(e);return t.splice(a,1),t}))}})},a):null}))})]}):Object(G.jsxs)(j.a,{container:!0,spacing:1,children:[Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(n[0]),height:300,borderRadius:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",position:"relative"},onDoubleClick:function(){r(n[0])},children:Object(G.jsx)(Ge.a,{style:{position:"absolute",top:5,right:5,cursor:"pointer",color:"#ed4956"},onClick:function(){var t=Object(he.a)(n);t.splice(0,1),e.setData(t),e.setFiles((function(e){var t=Object(he.a)(e);return t.splice(0,1),t}))}})})}),Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:Object(G.jsx)(j.a,{container:!0,spacing:1,children:n.map((function(a,o){if(0!==o){if(!(o>3&&n.length>5))return h(n)&&n.length<=5?o>2?b(a)?Object(G.jsx)(j.a,{item:!0,md:12,lg:12,xl:12,xs:12,sm:12,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",children:Object(G.jsx)("video",{width:"100%",height:"130",src:a,controls:!0})})}):Object(G.jsx)(j.a,{item:!0,md:12,lg:12,xl:12,xs:12,sm:12,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(a),width:"auto",height:105,borderRadius:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",position:"relative"},onDoubleClick:function(){r(a)}})}):Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(a),width:"auto",height:155,borderRadius:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},onDoubleClick:function(){r(a)}})}):Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",style:{backgroundImage:"url(".concat(a),width:"auto",height:145,borderRadius:5,backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",position:"relative"},onDoubleClick:function(){r(a)},children:Object(G.jsx)(Ge.a,{style:{position:"absolute",top:5,right:5,cursor:"pointer",color:"#ed4956"},onClick:function(){var t=Object(he.a)(n);t.splice(o,1),e.setData(t),e.setFiles((function(e){var t=Object(he.a)(e);return t.splice(o,1),t}))}})})},o);if(4===o)return Object(G.jsx)(j.a,{item:!0,md:6,lg:6,xl:6,xs:6,sm:6,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{backgroundImage:"url(".concat(a),width:"auto",height:145,borderRadius:5,cursor:"pointer"},onClick:function(){u(!0)},children:Object(G.jsxs)(g.a,{style:{color:"white"},className:t.title,children:["+",n.length-(o+1)]})})})}return null}))})})]})};return Object(G.jsxs)("div",{style:{width:e.width,maxWidth:e.maxWidth},children:[!1===d?null!=p(e.images)&&Object(G.jsx)("div",{children:p(e.images)}):null!=m(e.images)&&Object(G.jsx)("div",{children:m(e.images)}),i&&Object(G.jsx)(He.a,{scroll:"body",open:!!i,onClose:function(){r(null)},hideActions:!0,children:Object(G.jsx)(j.a,{container:!0,direction:"row",justify:"center",children:Object(G.jsx)("img",{style:{maxWidth:"100%"},src:i,alt:"previewImage"})})})]})}var $e=Object(S.a)((function(e){return{modalOverflay:{position:"fixed",top:0,left:0,zIndex:99,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},root:{position:"fixed",top:97,left:"32%",width:"550px",zIndex:100},header:{backgroundColor:"#2a3f54",padding:10,borderTopLeftRadius:2,borderTopRightRadius:2,display:"flex",justifyContent:"space-between"},avatarContainer:{display:"flex",alignItems:"center"},avatar:{width:30,height:30,marginRight:10},name:{fontSize:13,color:"#009688",fontWeight:"bold"},textField:{width:"100%","& .MuiInput-underline:after":{borderBottom:"none"},"& .MuiInput-underline:before":{borderBottom:"none"},"&:hover .MuiInput-underline:before":{borderBottom:"none"}},action:{padding:"0 10px 10px 10px",display:"flex",alignItems:"center",justifyContent:"space-between"},button:{width:20,height:20,borderRadius:2,border:"1px solid #eeeeee",padding:5,cursor:"pointer","&:hover":{backgroundColor:"#009688"},"&:hover svg":{color:"white"}},icon:{color:"#009688",width:20,height:20,cursor:"pointer"},previewImage:{width:"100%",height:"300px",objectFit:"cover"}}})),Je=function(e){var t=e.isShowing,n=e.hide,o=e.propRef,i=e.displayName,s=e.avatar,c=e.fileInput,d=e.files,u=e.handleFileChange,j=e.setPosts,m=e.setFiles,b=$e(),p=Object(a.useState)(""),x=Object(l.a)(p,2),O=x[0],v=x[1],y=Object(a.useState)([]),w=Object(l.a)(y,2),N=w[0],C=w[1],I=P(),k=I.loading,S=I.onLoading,R=I.offLoading;document.body.style.overflow=t?"hidden":"auto",Object(a.useEffect)((function(){if(d){C([]);for(var e=function(e){C((function(t){return[].concat(Object(he.a)(t),[URL.createObjectURL(d[e])])}))},t=0;t<d.length;t++)e(t)}else C([])}),[d]);return t?r.a.createPortal(Object(G.jsxs)("div",{style:{position:"relative"},children:[Object(G.jsx)("div",{className:b.modalOverflay}),Object(G.jsxs)(h.a,{className:b.root,ref:o,children:[Object(G.jsxs)("div",{className:b.header,children:[Object(G.jsxs)("div",{className:b.avatarContainer,children:[Object(G.jsx)(f.a,{alt:"avatar",src:s,className:b.avatar}),Object(G.jsx)(g.a,{className:b.name,children:i})]}),Object(G.jsx)(pe.a,{className:b.icon})]}),Object(G.jsx)("div",{style:{padding:10},children:Object(G.jsx)(Y.a,{className:b.textField,placeholder:"What's on your mind ?",multiline:!0,rows:4,rowsMax:4,onChange:function(e){v(e.target.value)}})}),Object(G.jsx)("div",{style:{padding:"0 10px"},children:N.length>0&&Object(G.jsx)(Ye,{images:N,setData:C,setFiles:m,maxWidth:540})}),Object(G.jsxs)("div",{className:b.action,children:[Object(G.jsx)("div",{className:b.button,onClick:function(e){c.current.click()},children:Object(G.jsx)(We.a,{className:b.icon})}),Object(G.jsx)("input",{type:"file",hidden:!0,ref:c,onChange:u,accept:"image/*",multiple:!0}),Object(G.jsx)("div",{className:b.button,onClick:function(){S();var e=localStorage.getItem("username");O.length>0&&(H.createPost(e,O).then((function(e){if(200===e.status){var t=e.data;if(d){for(var n=new FormData,a=0;a<d.length;a++)n.append("postImage[".concat(a,"]"),d[a],d[a].name);H.uploadImage(t.id,n).then((function(e){200===e.status&&(t.postImages=e.data,j((function(e){return[t].concat(Object(he.a)(e))})),R())}))}else R(),j((function(t){return[e.data].concat(Object(he.a)(t))}))}})),v(""),m(null),n())},children:Object(G.jsx)(ve.a,{className:b.icon})})]})]})]}),document.body):k?r.a.createPortal(Object(G.jsx)(Se,{}),document.body):null},Ke=function(e){var t=e.setPosts,n=e.avatar,o=e.displayName,i=Fe(),r=Object(a.useRef)(null),s=Object(a.useState)(!1),c=Object(l.a)(s,2),d=c[0],u=c[1],j=Object(a.useState)(null),m=Object(l.a)(j,2),b=m[0],p=m[1],x=T(),O=x.isShowing,v=x.toggle,y=Object(a.useRef)(null),w=localStorage.getItem("username");return Object(a.useEffect)((function(){var e=function(e){r.current&&!r.current.contains(e.target)&&(p(null),v())};return null!==y.current&&d&&(u(!1),y.current.click()),document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[r,v,d,w]),Object(G.jsxs)(h.a,{className:i.root,children:[Object(G.jsx)(Je,{isShowing:O,hide:v,propRef:r,displayName:o,avatar:n,fileInput:y,files:b,handleFileChange:function(e){p(b?function(t){return Array.from(t).concat(Array.from(e.target.files))}:e.target.files)},setPosts:t,setFiles:p}),Object(G.jsxs)("div",{className:i.avatarContainer,children:[Object(G.jsx)(f.a,{alt:"avatar",src:n,className:i.avatar}),Object(G.jsx)(g.a,{className:i.name,children:o})]}),Object(G.jsxs)("div",{className:i.content,children:[Object(G.jsx)("div",{className:i.button,onClick:v,children:Object(G.jsx)(Ae.a,{className:i.icon})}),Object(G.jsx)("div",{className:i.button,onClick:function(){u(!0),v()},children:Object(G.jsx)(We.a,{className:i.icon})})]})]})},Xe=Object(S.a)((function(e){return{root:{},content:{padding:"100px 40px"},container:{padding:"5px 0"},uploadSkeleton:{width:"15%",height:100,borderRadius:10,position:"fixed"},suggestionSkeleton:{width:"15%",height:100,position:"fixed",top:100,right:40,borderRadius:10}}})),Ze=n(617),Qe=Object(S.a)((function(e){return{root:{width:"100%"},avatarContainer:{padding:10,borderTopLeftRadius:2,borderTopRightRadius:2,display:"flex",alignItems:"center",marginBottom:20}}})),et=function(){var e=Qe();return Object(G.jsx)(j.a,{item:!0,style:{padding:0,marginBottom:100,minWidth:500},xs:12,sm:4,md:4,lg:4,children:Object(G.jsxs)(h.a,{className:e.root,children:[Object(G.jsxs)("div",{className:e.avatarContainer,children:[Object(G.jsx)(Ze.a,{variant:"circle",width:27,height:27,children:Object(G.jsx)(f.a,{})}),Object(G.jsxs)("div",{style:{width:"100%",marginLeft:10},children:[Object(G.jsx)(Ze.a,{animation:"wave",height:15,width:"60%"}),Object(G.jsx)(Ze.a,{animation:"wave",height:15,width:"40%"})]})]}),Object(G.jsx)(Ze.a,{animation:"wave",height:300,variant:"rect"}),Object(G.jsxs)("div",{style:{width:"100%",marginTop:20,padding:10},children:[Object(G.jsx)(Ze.a,{animation:"wave",height:15,width:"60%"}),Object(G.jsx)(Ze.a,{animation:"wave",height:15,width:"40%"})]})]})})},tt=function(){var e=Xe(),t=Object(a.useState)([]),n=Object(l.a)(t,2),o=n[0],i=n[1],r=Object(a.useState)([]),s=Object(l.a)(r,2),c=s[0],d=s[1],u=Object(a.useState)(!1),m=Object(l.a)(u,2),b=m[0],h=m[1],p=Object(a.useState)(""),g=Object(l.a)(p,2),f=g[0],x=g[1],O=Object(a.useState)(""),v=Object(l.a)(O,2),y=v[0],w=v[1];Object(a.useEffect)((function(){(function(){var e=Object(be.a)(me.a.mark((function e(){var t;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("username"),h(!0),e.next=4,A.getUserAvatar(t).then((function(e){200===e.status&&x(e.data.path)}));case 4:return e.next=6,_.getProfile(t,t).then((function(e){200===e.status&&w(e.data.displayName)}));case 6:return e.next=8,_.getSuggestion(t).then((function(e){200===e.status&&d(e.data)}));case 8:return e.next=10,H.getPostUser(t).then((function(e){200===e.status&&(i(e.data),h(!1))}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(G.jsxs)("div",{className:e.root,children:[Object(G.jsx)(V,{isHome:!0}),Object(G.jsxs)("div",{className:e.content,children:[b?null:Object(G.jsx)(Ke,{setPosts:i,avatar:f,displayName:y}),b?Object(G.jsxs)(j.a,{container:!0,className:e.container,spacing:0,direction:"column",justify:"center",alignItems:"center",children:[Object(G.jsx)(et,{}),Object(G.jsx)(et,{})]}):Object(G.jsxs)(j.a,{container:!0,className:e.container,spacing:0,direction:"column",justify:"center",alignItems:"center",children:[o.length>0&&o.map((function(e,t){return Object(G.jsx)(j.a,{item:!0,style:{padding:0,marginBottom:100,minWidth:500},xs:12,sm:4,md:4,lg:4,children:Object(G.jsx)(Be,{post:e,setPosts:i,postIndex:t})},e.id)})),o.length>0&&Object(G.jsx)(J.a,{color:"primary",onClick:function(){var e=localStorage.getItem("username"),t=o[o.length-1].id;H.getMorePost(e,t).then((function(e){200===e.status&&(e.data.length>0?i(o.concat(e.data)):alert("There are no more posts"))}))},children:"More posts"})]}),b?null:Object(G.jsx)(Ue,{suggests:c})]})]})},nt=n(13),at=n.p+"static/media/background.276d703a.jpg",ot=Object(S.a)((function(e){var t;return{root:{height:"100%"},background:{backgroundImage:"url(".concat(at,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center center"},container:(t={alignItems:"flex-end",minHeight:"100vh",paddingRight:"150px"},Object(nt.a)(t,e.breakpoints.down("md"),{alignItems:"center",paddingRight:0}),Object(nt.a)(t,"&[active='signup']",{alignItems:"center",paddingRight:"0px"}),t),card:{maxWidth:500,alignItem:"center",textAlign:"center",backgroundColor:"#2a3f54",opacity:.9,borderRadius:"10px",border:"2px solid #009688"},logo:{marginTop:10},text:{fontSize:10,fontWeight:"bold",color:"#8E8E8E",textTransform:"uppercase",textAlign:"left"},textField:{marginBottom:30,"& .MuiInputBase-input":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"#109cbb"},"& .MuiInput-underline:before":{borderBottomColor:"#8E8E8E"},"&:hover .MuiInput-underline:before":{borderBottomColor:"#8E8E8E"}},cardAction:{justifyContent:"center",flexDirection:"column",marginBottom:40},button:{width:"80%",marginBottom:10,color:"#109cbb",fontWeight:"bold",borderColor:"#109cbb","&:hover":{backgroundColor:"#109cbb",color:"white"}},link:{fontSize:12,color:"#8E8E8E",fontWeight:"bold",textDecoration:"none","&:hover":{textDecoration:"none"}},signUp:{textDecoration:"none",color:"#109cbb",marginLeft:"5px","&:hover":{textDecoration:"none"}}}})),it=n(618),rt=n(619),st=n(620),ct=n(621),lt=Object(S.a)((function(e){return{cardSignin:{maxWidth:500,alignItem:"center",textAlign:"center",backgroundColor:"#2a3f54",opacity:.9,borderRadius:"10px",border:"2px solid #009688","&[animate='1']":{animation:"$toLeft .8s ".concat(e.transitions.easing.easeInOut)},"&[animate='0']":{animation:"$moveIn .3s ".concat(e.transitions.easing.easeInOut)}},cardSignup:{maxWidth:500,alignItem:"center",textAlign:"center",backgroundColor:"#2a3f54",opacity:.9,borderRadius:"10px",border:"2px solid #009688","&[animate='1']":{animation:"$toRight .8s ".concat(e.transitions.easing.easeInOut)},"&[animate='0']":{animation:"$moveIn .3s ".concat(e.transitions.easing.easeInOut)}},logo:{marginTop:10},text:{fontSize:10,fontWeight:"bold",color:"#8E8E8E",textTransform:"uppercase",textAlign:"left"},textField:{"& .MuiInputBase-input":{color:"white"},"& .MuiInput-underline:after":{borderBottomColor:"#109cbb"},"& .MuiInput-underline:before":{borderBottomColor:"#8E8E8E"},"&:hover .MuiInput-underline:before":{borderBottomColor:"#8E8E8E"},"& .MuiFormHelperText-root":{color:"red"}},cardAction:{justifyContent:"center",flexDirection:"column",marginBottom:40},button:{width:"80%",marginBottom:10,color:"#109cbb",fontWeight:"bold",borderColor:"#109cbb","&:hover":{backgroundColor:"#109cbb",color:"white"}},link:{fontSize:12,color:"#8E8E8E",fontWeight:"bold",textDecoration:"none","&:hover":{textDecoration:"none"}},signUp:{textDecoration:"none",color:"#109cbb",marginLeft:"5px","&:hover":{textDecoration:"none"}},"@keyframes toLeft":{"0%":{opacity:.9,transform:"translateX(0)"},"100%":{opacity:0,transform:"translateX(-105%)"}},"@keyframes toRight":{"0%":{opacity:.9,transform:"translateX(0)"},"100%":{opacity:0,transform:"translateX(105%)"}},"@keyframes moveIn":{"0%":{opacity:0},"100%":{opacity:.9}}}})),dt=Object(a.createContext)(),ut=function(){var e=lt(),t=Object(a.useState)(0),n=Object(l.a)(t,2),o=n[0],i=n[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),c=s[0],u=s[1],j=Object(a.useState)(""),m=Object(l.a)(j,2),b=m[0],h=m[1],p=Object(a.useState)({}),f=Object(l.a)(p,2),x=f[0],O=f[1],v=function(){(function(){var e=!1;return""===c&&(O((function(e){return Object(d.a)(Object(d.a)({},e),{},{username:"Username is required."})})),e=!0),""!==c&&O((function(e){return Object(d.a)(Object(d.a)({},e),{},{username:""})})),""===b&&(O((function(e){return Object(d.a)(Object(d.a)({},e),{},{password:"Password is required."})})),e=!0),""!==b&&O((function(e){return Object(d.a)(Object(d.a)({},e),{},{password:""})})),e})()||B.login(c,b).then((function(e){200===e.status?(localStorage.setItem("token",e.data.token),localStorage.setItem("username",c),localStorage.setItem("data",JSON.stringify(e.data)),window.location=window.location.origin):O((function(t){return Object(d.a)(Object(d.a)({},t),{},{username:e.data})}))}))},y=Object(a.useContext)(dt).switchToSignup;return Object(G.jsxs)(it.a,{className:e.cardSignin,animate:o,children:[Object(G.jsx)("img",{src:k,alt:"title",className:e.logo}),Object(G.jsxs)(rt.a,{children:[Object(G.jsxs)("div",{style:{marginBottom:30},children:[Object(G.jsx)(g.a,{className:e.text,variant:"body1",gutterBottom:!0,children:"Username"}),Object(G.jsx)(Y.a,{error:null!=x,fullWidth:!0,autoFocus:!0,className:e.textField,onChange:function(e){u(e.target.value)},helperText:x.username})]}),Object(G.jsxs)("div",{style:{marginBottom:30},children:[Object(G.jsx)(g.a,{className:e.text,variant:"body1",gutterBottom:!0,children:"Password"}),Object(G.jsx)(Y.a,{error:null!=x,fullWidth:!0,className:e.textField,onChange:function(e){h(e.target.value)},type:"password",helperText:x.password,onKeyPress:function(e){"Enter"===e.key&&v()}})]})]}),Object(G.jsxs)(st.a,{className:e.cardAction,children:[Object(G.jsx)(J.a,{variant:"outlined",className:e.button,onClick:v,children:"Login"}),Object(G.jsx)(ct.a,{href:"#",className:e.link,children:"Forgot password?"})]}),Object(G.jsxs)(g.a,{className:e.link,style:{marginBottom:"10px",textAlign:"center"},children:["Don't have an account?",Object(G.jsx)(ct.a,{href:"#",className:e.signUp,onClick:function(){y(),i(1)},children:"Sign up"})]})]})},jt=n(622),mt=function(){var e=lt(),t=Object(a.useState)(0),n=Object(l.a)(t,2),o=n[0],i=n[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),c=s[0],u=s[1],j=Object(a.useState)(""),m=Object(l.a)(j,2),b=m[0],h=m[1],p=Object(a.useState)(""),f=Object(l.a)(p,2),x=f[0],O=f[1],v=Object(a.useState)(""),y=Object(l.a)(v,2),w=y[0],N=y[1],C=Object(a.useState)(""),I=Object(l.a)(C,2),S=I[0],R=I[1],P=Object(a.useState)({}),T=Object(l.a)(P,2),L=T[0],E=T[1],D=Object(a.useContext)(dt).switchToSignin;return Object(G.jsxs)(it.a,{className:e.cardSignup,animate:o,children:[Object(G.jsx)("img",{src:k,alt:"title",className:e.logo}),Object(G.jsxs)(rt.a,{children:[Object(G.jsxs)("div",{style:{marginBottom:30},children:[Object(G.jsx)(g.a,{className:e.text,variant:"body1",gutterBottom:!0,children:"Email"}),Object(G.jsx)(Y.a,{error:null!=L,fullWidth:!0,autoFocus:!0,className:e.textField,onChange:function(e){u(e.target.value)},helperText:L.email})]}),Object(G.jsxs)("div",{style:{marginBottom:30,display:"flex"},children:[Object(G.jsxs)("div",{children:[Object(G.jsx)(g.a,{className:e.text,variant:"body1",gutterBottom:!0,children:"Firstname"}),Object(G.jsx)(Y.a,{error:null!=L,fullWidth:!0,className:e.textField,onChange:function(e){h(e.target.value)},helperText:L.firstname})]}),Object(G.jsx)(jt.a,{orientation:"vertical",style:{margin:"0 10px"},flexItem:!0}),Object(G.jsxs)("div",{children:[Object(G.jsx)(g.a,{className:e.text,variant:"body1",gutterBottom:!0,children:"Lastname"}),Object(G.jsx)(Y.a,{error:null!=L,fullWidth:!0,className:e.textField,onChange:function(e){O(e.target.value)},helperText:L.lastname})]})]}),Object(G.jsxs)("div",{style:{marginBottom:30},children:[Object(G.jsx)(g.a,{className:e.text,variant:"body1",gutterBottom:!0,children:"Username"}),Object(G.jsx)(Y.a,{error:null!=L,fullWidth:!0,className:e.textField,onChange:function(e){N(e.target.value)},helperText:L.username})]}),Object(G.jsxs)("div",{style:{marginBottom:30},children:[Object(G.jsx)(g.a,{className:e.text,variant:"body1",gutterBottom:!0,children:"Password"}),Object(G.jsx)(Y.a,{error:null!=L,fullWidth:!0,className:e.textField,type:"password",onChange:function(e){R(e.target.value)},helperText:L.password})]})]}),Object(G.jsxs)(st.a,{className:e.cardAction,children:[Object(G.jsx)(J.a,{variant:"outlined",className:e.button,onClick:function(e){if(e.preventDefault(),!function(){var e=!1;return RegExp(/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,15}/g).test(c)?E((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:""})})):(E((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:"Invalid email."})})),e=!0),""===c&&(E((function(e){return Object(d.a)(Object(d.a)({},e),{},{email:"Email is required."})})),e=!0),""===b&&(E((function(e){return Object(d.a)(Object(d.a)({},e),{},{firstname:"Firstname is required."})})),e=!0),""!==b&&E((function(e){return Object(d.a)(Object(d.a)({},e),{},{firstname:""})})),""===x&&(E((function(e){return Object(d.a)(Object(d.a)({},e),{},{lastname:"Lastname is required."})})),e=!0),""!==x&&E((function(e){return Object(d.a)(Object(d.a)({},e),{},{lastname:""})})),""===w&&(E((function(e){return Object(d.a)(Object(d.a)({},e),{},{username:"Username is required."})})),e=!0),""!==w&&(w.length<6?(E((function(e){return Object(d.a)(Object(d.a)({},e),{},{username:"Username cant be less than 6 characters."})})),e=!0):E((function(e){return Object(d.a)(Object(d.a)({},e),{},{username:""})}))),RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{6,})").test(S)?E((function(e){return Object(d.a)(Object(d.a)({},e),{},{password:""})})):(E((function(e){return Object(d.a)(Object(d.a)({},e),{},{password:"Password must be six charaters and contain at least lowercase character, uppercase character, numeric character."})})),e=!0),""===S&&(E((function(e){return Object(d.a)(Object(d.a)({},e),{},{password:"Password is required."})})),e=!0),e}()){var t=b+" "+x;B.register(w,S,c,b,x,t).then((function(e){200===e.status?alert("\u0110\u0103ng k\xfd th\xe0nh c\xf4ng"):E((function(t){return Object(d.a)(Object(d.a)({},t),{},{email:e.data.emailError,username:e.data.usernameError})}))}))}},children:"Sign up"}),Object(G.jsx)(g.a,{className:e.link,style:{padding:"0 40px"},children:"By signing up, you agree to our Terms, Data Policy and Cookies Policy"})]}),Object(G.jsxs)(g.a,{className:e.link,style:{marginBottom:"10px",textAlign:"center"},children:["Have an account?",Object(G.jsx)(ct.a,{href:"#",className:e.signUp,onClick:function(){D(),i(1)},children:"Login"})]})]})},bt=function(){var e=ot(),t=Object(a.useState)("signin"),n=Object(l.a)(t,2),o=n[0],i=n[1],r={switchToSignup:function(){setTimeout((function(){i("signup")}),600)},switchToSignin:function(){setTimeout((function(){i("signin")}),600)}};return Object(G.jsx)(dt.Provider,{value:r,children:Object(G.jsx)("div",{className:e.root,children:Object(G.jsx)("div",{className:e.background,children:Object(G.jsx)(j.a,{container:!0,justify:"center",spacing:0,direction:"column",className:e.container,active:o,children:Object(G.jsxs)(j.a,{item:!0,xs:12,sm:6,style:{width:"400px"},children:["signin"===o&&Object(G.jsx)(ut,{}),"signup"===o&&Object(G.jsx)(mt,{})]})})})})})},ht=Object(S.a)((function(e){return{root:{position:"relative"},profile:{padding:"100px 40px 0 40px"},content:{width:"40%",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:50},uploadButton:{border:0,padding:0,cursor:"pointer",backgroundColor:"white",position:"relative"},avatar:{width:120,height:120,"&[loading='1']":{opacity:.5}},icon:{width:20,height:"auto",color:"#888"},info:{flexGrow:1},infoPart:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:10},typo:{color:"inherit",marginRight:20},button:{textTransform:"inherit",padding:"3px 20px",backgroundColor:"#0095f6"},divider:{width:"58%",margin:"0 auto",height:1,backgroundColor:"#d9d9d9"},gallery:{maxWidth:"60%",margin:"30px auto"},galleryItem:{position:"relative",cursor:"pointer","&:hover img":{opacity:.6},"&:hover $galleryItemInfo":{display:"block"}},galleryItemInfo:{display:"none",position:"absolute",top:"50%",left:"50%",color:"#fff",transform:"translate(-50%, -50%)","& ul, & li":{display:"flex",justifyContent:"center",alignItems:"center"},"& li":{marginRight:30}},galleryItemType:{position:"absolute",top:"1rem",right:"1rem",color:"white"},galleryOverlay:{width:"100%",height:"100%",backgroundColor:"#000"},galleryImage:{width:"100%",height:"100%",objectFit:"cover"},buttonProgress:{position:"absolute",color:"#009688",top:"50%",left:"50%",marginLeft:-12,marginTop:-12},avatarProgress:{position:"absolute",top:"50%",left:"50%",color:"#009688",marginLeft:-12,marginTop:-12},loadMore:{width:"100%",display:"grid",placeItems:"center",marginBottom:40}}})),pt=n(623),gt=n(624),ft=Object(S.a)((function(e){return{root:{position:"relative"},profile:{padding:"100px 40px 0 40px"},content:{width:"40%",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:50},uploadButton:{border:0,padding:0,cursor:"pointer",backgroundColor:"white",position:"relative"},avatar:{width:120,height:120,"&[loading='1']":{opacity:.5}},icon:{width:20,height:"auto",color:"#888"},info:{flexGrow:1},infoPart:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginBottom:10},typo:{color:"inherit",marginRight:20},button:{textTransform:"inherit",padding:"3px 20px",backgroundColor:"#0095f6"},divider:{width:"63%",margin:"0 auto",height:1,backgroundColor:"#d9d9d9"},buttonProgress:{position:"absolute",color:"#009688",top:"50%",left:"50%",marginLeft:-12,marginTop:-12},avatarProgress:{position:"absolute",top:"50%",left:"50%",color:"#009688",marginLeft:-12,marginTop:-12}}})),xt=Object(a.createContext)(),Ot=Object(a.createContext)(),vt=function(e,t){switch(t.type){case"FETCH_SUCCESS":return t.payload;case"FETCH_ERROR":return[];case"LOAD_MORE_POST":return e.concat(t.morePosts);case"REMOVE_POST":return e.filter((function(e){return e.id!==t.postId}));default:return e}},yt=function(e,t){switch(t.type){case"FETCH_SUCCESS":return t.payload;case"FETCH_ERROR":return[];case"LOAD_MORE_POST":return e.concat(t.morePosts);case"ADD_COMMENT":return e.map((function(e){return e.id===t.postId?Object(d.a)(Object(d.a)({},e),{},{comments:e.comments+1}):e}));case"REMOVE_COMMENT":return e.map((function(e){return e.id===t.postId?Object(d.a)(Object(d.a)({},e),{},{comments:e.comments-1}):e}));case"REMOVE_POST":return e.filter((function(e){return e.id!==t.postId}));default:return e}},wt=function(e,t){switch(t.type){case"FETCH_SUCCESS":return t.payload;case"FETCH_ERROR":return{};case"UPLOAD_AVATAR":return Object(d.a)(Object(d.a)({},e),{},{avatarUrl:t.path});case"FOLLOW":return Object(d.a)(Object(d.a)({},e),{},{isFollowed:!0,followers:e.followers+1});case"UNFOLLOW":return Object(d.a)(Object(d.a)({},e),{},{isFollowed:!1,followers:e.followers-1});default:return e}},Nt=function(e){var t=Object(a.useReducer)(vt,[]),n=Object(l.a)(t,2),o=n[0],i=n[1],r=Object(a.useReducer)(wt,{}),s=Object(l.a)(r,2),c=s[0],d=s[1],u=Object(a.useReducer)(yt,[]),j=Object(l.a)(u,2),m=j[0],b=j[1],h=Object(a.useState)(""),p=Object(l.a)(h,2),g=p[0],f=p[1],x=localStorage.getItem("username");Object(a.useEffect)((function(){""!==g&&(H.getPostProfile(x,g).then((function(e){200===e.status?i({type:"FETCH_SUCCESS",payload:e.data}):i({type:"FETCH_ERROR"})})),H.getPostProfile(x,g,!1).then((function(e){200===e.status?b({type:"FETCH_SUCCESS",payload:e.data}):b({type:"FETCH_ERROR"})})),_.getProfile(x,g).then((function(e){200===e.status?d({type:"FETCH_SUCCESS",payload:e.data}):d({type:"FETCH_ERROR"})})))}),[x,g]);var O={user:c,gallery:o,posts:m,targetUsername:g,setTargetUsername:f};return Object(G.jsx)(Ot.Provider,{value:{galleryDispatch:i,postsDispatch:b,userDispatch:d},children:Object(G.jsx)(xt.Provider,{value:O,children:e.children})})},Ct=function(){return Object(a.useContext)(xt)},It=function(){return Object(a.useContext)(Ot)},kt=Object(S.a)((function(){return{modalOverlay:{position:"fixed",top:0,left:0,zIndex:99,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},root:{position:"fixed",top:"50vh",left:"50%",width:"400px",zIndex:100,transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:15},avatarContainer:{padding:"20px 0"},avatar:{width:80,height:80},textContainer:{padding:"0px 20px 20px 20px",textAlign:"center"},text:{fontSize:14},option:{borderTop:"1px solid #d9d9d9",width:"100%",textAlign:"center",padding:"15px 0",fontSize:14,cursor:"pointer"}}})),St=function(e){var t=e.avatar,n=e.isShowing,a=e.modalRef,o=e.toggleModal,i=e.sourceUsername,s=e.targetUsername,c=kt(),l=P(),d=l.onLoading,u=l.offLoading;document.body.style.overflow=n?"hidden":"auto";var j=It().userDispatch;return n?r.a.createPortal(Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:c.modalOverlay}),Object(G.jsxs)(h.a,{className:c.root,ref:a,children:[Object(G.jsx)("div",{className:c.avatarContainer,children:Object(G.jsx)(f.a,{src:t,alt:"avatar",className:c.avatar})}),Object(G.jsx)("div",{className:c.textContainer,children:Object(G.jsxs)(g.a,{variant:"body1",className:c.text,children:["If you change your mind, you will have to request a follow-up to"," @"+s]})}),Object(G.jsx)("div",{className:c.option,style:{fontWeight:"bold",color:"#ed4956"},onClick:function(){d(),o(),_.unfollow(i,s).then((function(e){200===e.status&&(j({type:"UNFOLLOW"}),u())}))},children:"Unfollow"}),Object(G.jsx)("div",{className:c.option,onClick:function(){return o(!1)},children:"Cancel"})]})]}),document.body):null},Rt=function(e){var t=e.targetUsername,n=ft(),o=Object(a.useRef)(null),i=Object(a.useRef)(null),r=Ct(),s=r.user,c=r.setTargetUsername,l=It().userDispatch,d=P(),u=d.loading,j=d.onLoading,m=d.offLoading,b=T(),h=b.isShowing,p=b.toggle,O=localStorage.getItem("username");return Object(a.useEffect)((function(){c(t)}),[t,c]),Object(a.useEffect)((function(){var e=function(e){i.current&&!i.current.contains(e.target)&&(p(),document.body.style.overflow="auto")};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[i,p]),Object(G.jsxs)("div",{className:n.root,children:[Object(G.jsx)(St,{avatar:s.avatarUrl?s.avatarUrl:null,isShowing:h,modalRef:i,toggleModal:p,sourceUsername:O,targetUsername:s.userName?s.userName:null}),Object.keys(s).length>0&&Object(G.jsxs)("div",{className:n.profile,children:[Object(G.jsxs)("div",{className:n.content,children:[Object(G.jsx)("div",{style:{flexGrow:3},children:O!==t?Object(G.jsx)(f.a,{src:s.avatarUrl?s.avatarUrl:null,className:n.avatar}):Object(G.jsxs)("button",{className:n.uploadButton,onClick:function(){o.current.click()},children:[Object(G.jsx)(f.a,{src:s.avatarUrl?s.avatarUrl:null,className:n.avatar,loading:u?1:0}),u?Object(G.jsx)(x.a,{size:24,className:n.avatarProgress}):null,Object(G.jsx)("input",{type:"file",hidden:!0,accept:"image/*",ref:o,onChange:function(e){var t=new FormData;t.append("file",e.target.files[0]),j(),A.uploadAvatar(O,t).then((function(e){if(200===e.status){var t=e.data.path;l({type:"UPLOAD_AVATAR",path:t}),m()}}))}})]})}),Object(G.jsxs)("div",{className:n.info,children:[Object(G.jsxs)("div",{className:n.infoPart,children:[Object(G.jsx)(g.a,{variant:"h5",className:n.typo,children:s.displayName}),O!==t?s.isFollowed?Object(G.jsxs)("div",{style:{position:"relative"},children:[Object(G.jsxs)(J.a,{className:n.button,style:{border:"1px solid #d9d9d9",backgroundColor:"white"},onClick:function(){p()},disabled:u,children:[Object(G.jsx)(pt.a,{className:n.icon}),Object(G.jsx)(gt.a,{className:n.icon,style:{width:15}})]}),u&&Object(G.jsx)(x.a,{size:20,className:n.buttonProgress})]}):Object(G.jsxs)("div",{style:{position:"relative"},children:[Object(G.jsx)(J.a,{className:n.button,variant:"contained",color:"primary",disabled:u,onClick:function(){j(),_.follow(O,t).then((function(e){200===e.status&&(l({type:"FOLLOW"}),m())}))},children:"Follow"}),u&&Object(G.jsx)(x.a,{size:20,className:n.buttonProgress})]}):Object(G.jsx)(J.a,{className:n.button,style:{border:"1px solid #d9d9d9",backgroundColor:"white"},onClick:function(){window.location.href=window.location.origin+"/accounts/edit"},children:"Edit profile"})]}),Object(G.jsxs)("div",{className:n.infoPart,children:[Object(G.jsxs)(g.a,{variant:"body1",className:n.typo,children:[Object(G.jsxs)("span",{style:{fontWeight:"bold"},children:[s.posts," "]}),s.posts>1?"posts":"post"]}),Object(G.jsxs)(g.a,{variant:"body1",className:n.typo,children:[Object(G.jsxs)("span",{style:{fontWeight:"bold"},children:[s.followers," "]}),s.followers>1?"followers":"follower"]}),Object(G.jsxs)(g.a,{variant:"body1",className:n.typo,children:[Object(G.jsxs)("span",{style:{fontWeight:"bold"},children:[s.followings," "]}),s.following>1?"followings":"following"]})]}),Object(G.jsxs)("div",{className:n.infoPart,style:{flexDirection:"column",alignItems:"flex-start"},children:[Object(G.jsx)(g.a,{variant:"body1",style:{fontWeight:"bold"},children:s.fullName?s.fullName:s.userName}),Object(G.jsx)(g.a,{variant:"body1",children:s.bio?s.bio:""})]})]})]}),Object(G.jsx)("div",{className:n.divider})]})]})},Pt=Object(S.a)((function(e){return{root:{position:"relative"},gallery:{},galleryItem:{position:"relative",cursor:"pointer","&:hover img":{opacity:.6},"&:hover $galleryItemInfo":{display:"block"}},galleryItemInfo:{display:"none",position:"absolute",top:"50%",left:"50%",color:"#fff",transform:"translate(-50%, -50%)","& ul, & li":{display:"flex",justifyContent:"center",alignItems:"center"},"& li":{marginRight:30}},galleryItemType:{position:"absolute",top:"1rem",right:"1rem",color:"white"},galleryOverlay:{width:"100%",height:"100%",backgroundColor:"#000"},galleryImage:{width:"100%",height:"100%",objectFit:"cover"},loadMore:{width:"100%",display:"grid",placeItems:"center",marginBottom:40}}})),Tt=n(628),Lt=n(629),Et=Object(S.a)((function(){return{modalOverlay:{position:"fixed",top:0,left:0,zIndex:99,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},root:{position:"fixed",top:"50vh",left:"50%",width:"65vw",zIndex:100,transform:"translate(-50%, -50%)"},postContainer:{},postImage:{width:"100%",height:"100%",objectFit:"cover"},postHeader:{display:"flex",alignItems:"center",padding:"20px 15px",borderBottom:"1px solid #d9d9d9"},postAvatar:{width:30,height:30,marginRight:15},displayName:{fontWeight:"bold",fontSize:13,marginRight:10},postComment:{padding:"20px 15px",flexGrow:1,overflowY:"scroll",height:1,msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},comment:{display:"flex",alignItems:"flex-start"},commentSection:{display:"flex",flexDirection:"column",justifyContent:"center",marginBottom:20},commentInfo:{display:"flex",alignItems:"center",marginBottom:5},commentText:{fontSize:14},commentDate:{fontSize:11,fontWeight:400,color:"#8e8e8e"},postInteractSection:{borderTop:"1px solid #d9d9d9",padding:"5px 15px"},interact:{marginLeft:-3},likeText:{fontWeight:"bold",fontSize:16},postCommentSection:{borderTop:"1px solid #d9d9d9",flexGrow:0,padding:"5px 15px",display:"flex",alignItems:"center"},textField:{width:"100%",padding:"5px 0","& .MuiInput-underline:after":{borderBottom:"none"},"& .MuiInput-underline:before":{borderBottom:"none"},"&:hover .MuiInput-underline:before":{borderBottom:"none"}},input:{padding:0,fontSize:13},icon:{color:"#009688",cursor:"pointer"},slideIcon:{position:"absolute",top:"50%",padding:0,backgroundColor:"rgba(0, 0, 0, 0.4)",color:"white",border:"none",borderRadius:"50%",cursor:"pointer"},dot:{padding:5,backgroundColor:"#bbb",borderRadius:"50%",marginLeft:4,"&[active='1']":{backgroundColor:"#009688"}},button:{display:"flex",alignItems:"center",marginRight:10},closeIcon:{position:"fixed",right:10,top:10,zIndex:100,width:30,height:30,color:"white",cursor:"pointer"},more:{width:"100%",display:"grid",placeItems:"center",marginTop:20,cursor:"pointer"},moreIcon:{marginLeft:"auto",cursor:"pointer",color:"#8e8e8e"}}})),Dt=n(289),Bt=n.n(Dt),Mt=Object(S.a)((function(e){return{avatar:{width:30,height:30,marginRight:15,cursor:"pointer"},comment:{display:"flex",alignItems:"flex-start",marginBottom:10},displayName:{fontWeight:"bold",fontSize:13,marginRight:10,textDecoration:"none","&:visited":{color:"inherit"}},timeAgo:{fontSize:11,fontWeight:400,color:"#8e8e8e"},button:{color:"#8e8e8e",background:"0 0",border:0,cursor:"pointer",fontSize:11,fontWeight:"bold",width:"auto",padding:0,marginLeft:5},moreButton:{marginLeft:"auto",color:"#8e8e8e",cursor:"pointer"},divider:{borderBottom:"1px solid rgba(var(--f52,142,142,142),1)",display:"inline-block",height:0,marginRight:16,verticalAlign:"middle",width:24},showReplyButton:{color:"#8e8e8e",background:"0 0",border:0,cursor:"pointer",fontSize:11,fontWeight:"bold",width:"auto",padding:0},textField:{width:"100%","& .MuiInput-underline input":{padding:0},"& .MuiInput-underline:after":{borderBottom:"none"},"& .MuiInput-underline:before":{borderBottom:"none"},"&:hover .MuiInput-underline:before":{borderBottom:"none"},boxShadow:"0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)",borderRadius:50,padding:"0 10px"},paper:{padding:"0 15px",borderRadius:"50px",width:"100%"},reply:{display:"flex",alignItems:"flex-start",padding:"0 15px",margin:"10px 0 10px 30px"},input:{fontSize:13}}})),zt=function(e){var t=e.comment,n=e.setCommentShowing,o=e.setCommentId,i=e.setAuth,r=e.setComments,s=Mt(),c=Object(a.useState)(!1),u=Object(l.a)(c,2),j=u[0],m=u[1],b=Object(a.useState)(!1),h=Object(l.a)(b,2),p=h[0],x=h[1],O=Object(a.useState)([]),v=Object(l.a)(O,2),y=v[0],w=v[1],N=Object(a.useState)(t.replies>0?"Show "+t.replies+" replies":0===t.replies?"Hide replies":"Show replies"),C=Object(l.a)(N,2),I=C[0],k=C[1],S=Object(a.useState)(""),R=Object(l.a)(S,2),P=R[0],T=R[1],L=localStorage.getItem("username");return Object(a.useEffect)((function(){t.replies>0&&0===y.length&&W.getReply(t.id).then((function(e){200===e.status&&w(e.data)}))}),[t,y]),Object(G.jsxs)("div",{children:[Object(G.jsxs)("div",{className:s.comment,children:[Object(G.jsx)(f.a,{alt:"avatar",src:t.userAvatarUrl?t.userAvatarUrl:P,className:s.avatar,onClick:function(){window.location.href=window.location.origin+"/"+t.username}}),Object(G.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[Object(G.jsxs)("div",{style:{display:"flex",position:"relative"},children:[Object(G.jsx)("a",{href:"/"+t.username,className:s.displayName,children:t.userDisplayName}),Object(G.jsx)(g.a,{varian:"body1",style:{fontSize:14,wordBreak:"break-word"},children:t.content}),Object(G.jsx)(Bt.a,{className:s.moreButton,onClick:function(){n(!0),o(t.id),i(t.username===L)}})]}),Object(G.jsxs)("div",{children:[Object(G.jsx)(Ne.a,{date:t.dateCreate,className:s.timeAgo,title:null,live:!1}),Object(G.jsx)("button",{className:s.button,onClick:function(){m(!j),A.getUserAvatar(L).then((function(e){404===e.status?T(null):T(e.data.path)}))},children:"Reply"})]})]})]}),(null===y||void 0===y?void 0:y.length)>0&&Object(G.jsx)("div",{className:s.reply,children:Object(G.jsxs)("button",{className:s.showReplyButton,onClick:function(){if(y.length<t.replies&&p){var e=y[0].id;W.getMoreReply(t.id,e).then((function(e){if(200===e.status){w((function(t){return e.data.concat(t)}));var n=t.replies-y.length-e.data.length;k(0!==n?"Show more "+n+" replies":"Hide replies")}}))}else y.length===t.replies&&p?(k("Show replies"),x(!1)):(x(!0),y.length===t.replies?k("Hide replies"):k("Show more "+(t.replies-y.length)+" replies"))},children:[Object(G.jsx)("div",{className:s.divider}),Object(G.jsx)("span",{children:I})]})}),p&(null===y||void 0===y?void 0:y.length)>0?null===y||void 0===y?void 0:y.map((function(e){return Object(G.jsxs)("div",{className:s.reply,children:[Object(G.jsx)(f.a,{alt:"avatar",src:e.userAvatarUrl?e.userAvatarUrl:P,className:s.avatar,style:{width:25,height:25},onClick:function(){window.location.href=window.location.origin+"/"+e.username}}),Object(G.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[Object(G.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(G.jsx)("a",{href:"/"+e.username,className:s.displayName,children:e.userDisplayName}),Object(G.jsx)(g.a,{varian:"body1",style:{fontSize:14,overflowWrap:"break-word",maxWidth:"80%"},children:e.content})]}),Object(G.jsx)(Ne.a,{date:e.dateCreate,className:s.timeAgo,title:null,live:!1})]})]},e.id)})):null,j?Object(G.jsxs)("div",{className:s.reply,style:{alignItems:"center"},children:[Object(G.jsx)(f.a,{alt:"avatar",src:P,className:s.avatar,style:{width:25,height:25}}),Object(G.jsx)(Y.a,{className:s.textField,multiline:!0,rows:1,rowsMax:2,onKeyDown:function(e){return function(e){if("Enter"===e.key){e.preventDefault();var n=localStorage.getItem("username"),a=e.target.value,o=e.target.id;W.replyComment(n,a,o).then((function(e){200===e.status&&(t.replies<=3?k("Hide replies"):k("Show more replies"),w([].concat(Object(he.a)(y),[e.data])),r((function(e){return e.map((function(e){return e.id===o?Object(d.a)(Object(d.a)({},e),{},{replies:e.replies+1}):e}))})),m(!1),x(!0))}))}}(e)},id:t.id,InputProps:{classes:{input:s.input}}})]}):null]})},Ut=n(625),At=n(626),Wt=n(627),Ft=Object(S.a)((function(){return{modalOverlay:{position:"absolute",top:0,left:0,zIndex:101,width:"100%",height:"100%",backgroundColor:"#000",opacity:.5},root:{position:"absolute",top:"50%",left:"50%",width:"400px",zIndex:102,transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:15},option:{borderTop:"1px solid #d9d9d9",width:"100%",textAlign:"center",padding:"15px 0",fontSize:14,cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},iconContainer:{display:"flex",alignItems:"center",flex:"1.1 0 0px"},icon:{marginRight:10},checkIcon:{fontSize:14,marginLeft:5,color:Ce.a[500]}}})),Ht=function(e){var t=e.isShowing,n=e.toggleModal,o=e.togglePostDetail,i=e.postId,r=e.auth,s=e.privateMode,c=e.onLoading,u=e.offLoading,j=e.modalRef,m=e.setPost,b=Ft(),p=Object(a.useState)(!1),g=Object(l.a)(p,2),f=g[0],x=g[1],O=Object(a.useState)(!1),v=Object(l.a)(O,2),y=v[0],w=v[1],N=Object(a.useState)(!1),C=Object(l.a)(N,2),I=C[0],k=C[1],S=function(e,t){"clickaway"!==t&&(k(!1),w(!1))},R=It().galleryDispatch;return t&&(document.body.style.overflow="hidden"),t?Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:b.modalOverlay}),Object(G.jsxs)(h.a,{className:b.root,ref:j,children:[r?Object(G.jsxs)("div",{style:{width:"100%"},children:[Object(G.jsxs)("div",{className:b.option,style:{color:"#0095f6",borderRadius:15},onClick:function(){c(),n(),H.setPrivate(i).then((function(e){200===e.status&&(m((function(e){return Object(d.a)(Object(d.a)({},e),{},{privateMode:!0})})),u()),document.body.style.overflow="auto"}))},children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"},children:Object(G.jsx)(Te.a,{className:b.icon})}),Object(G.jsxs)("div",{className:b.iconContainer,children:["Private",s&&Object(G.jsx)(Le.a,{className:b.checkIcon})]})]}),Object(G.jsxs)("div",{className:b.option,style:{color:"#0095f6"},onClick:function(){c(),n(),H.setPublic(i).then((function(e){200===e.status&&(m((function(e){return Object(d.a)(Object(d.a)({},e),{},{privateMode:!1})})),u()),document.body.style.overflow="auto"}))},children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"},children:Object(G.jsx)(Ee.a,{className:b.icon})}),Object(G.jsxs)("div",{className:b.iconContainer,children:["Public",!s&&Object(G.jsx)(Le.a,{className:b.checkIcon})]})]}),Object(G.jsx)("div",{className:b.option,style:{color:"#ed4956"},onClick:function(){c(),n(),H.deletePostImage(i).then((function(e){200===e.status&&H.deletePost(i).then((function(e){200===e.status&&(R({type:"REMOVE_POST",postId:i}),o(),u())})),document.body.style.overflow="auto"}))},children:"Remove"})]}):f?Object(G.jsx)("div",{className:b.option,style:{borderRadius:15},children:"Please select a problem"}):Object(G.jsx)("div",{className:b.option,style:{color:"#ed4956",borderRadius:15},onClick:function(){x(!0)},children:"Report"}),f?["Nudity","Violence","Harassment","Suicide or Self-injury","False information","Spam","Unauthorized Sales","Hate speech","Terrorism","Gross content","Child Abuse"].map((function(e){return Object(G.jsx)("div",{className:b.option,style:{borderRadius:15,fontWeight:400},onClick:function(t){return function(e,t){var a=localStorage.getItem("username");c(),n(),H.reportPost(i,a,t).then((function(e){200===e.status&&(w(!0),u()),400===e.status&&(k(!0),u()),document.body.style.overflow="auto"}))}(0,e)},children:e},e)})):null,Object(G.jsx)("div",{className:b.option,onClick:function(){x(!1),n(),document.body.style.overflow="auto"},children:"Cancel"})]})]}):Object(G.jsxs)("div",{children:[Object(G.jsx)(K.a,{open:y,autoHideDuration:3e3,onClose:S,children:Object(G.jsx)(ee.a,{onClose:S,severity:"success",children:"Success! We will inspect your report!"})}),Object(G.jsx)(K.a,{open:I,autoHideDuration:3e3,onClose:S,children:Object(G.jsx)(ee.a,{onClose:S,severity:"error",children:"You already have reported this post!"})})]})},_t=Object(S.a)((function(){return{modalOverlay:{position:"fixed",top:0,left:0,zIndex:101,width:"100%",height:"100%",backgroundColor:"#000",opacity:.5},root:{position:"fixed",top:"50vh",left:"50%",width:"400px",zIndex:102,transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:15},option:{borderTop:"1px solid #d9d9d9",width:"100%",textAlign:"center",padding:"15px 0",fontSize:14,cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},iconContainer:{display:"flex",alignItems:"center",flex:"1.1 0 0px"},icon:{marginRight:10},checkIcon:{fontSize:14,marginLeft:5,color:Ce.a[500]}}})),Gt=function(e){var t=e.isShowing,n=e.modalRef,a=e.setShowingModal,o=e.auth,i=e.commentId,r=e.setComments,s=e.postId,c=_t(),l=P(),d=l.loading,u=l.onLoading,j=l.offLoading;t&&(document.body.style.overflow="hidden");var m=It().postsDispatch;return t?Object(G.jsxs)("div",{children:[d?Object(G.jsx)(Se,{}):null,Object(G.jsx)("div",{className:c.modalOverlay}),Object(G.jsxs)(h.a,{className:c.root,ref:n,children:[o?Object(G.jsx)("div",{className:c.option,style:{color:"#ed4956",borderRadius:15},onClick:function(){a(!1),u(),W.deleteComment(i).then((function(e){200===e.status&&(m({type:"REMOVE_COMMENT",postId:s}),r((function(e){return e.filter((function(e){return e.id!==i}))})),j()),document.body.style.overflow="auto"}))},children:"Remove"}):Object(G.jsx)("div",{className:c.option,style:{color:"#ed4956",borderRadius:15},children:"Report"}),Object(G.jsx)("div",{className:c.option,style:{borderRadius:0},onClick:function(){a(!1),document.body.style.overflow="auto"},children:"Cancel"})]})]}):null},Vt=function(e){var t,n=e.isShowing,o=e.modalRef,i=e.postId,r=e.statusModalRef,s=e.statusShowing,c=e.setStatusShowing,u=e.commentShowing,m=e.setCommentShowing,b=e.commentModalRef,p=e.togglePostDetail,x=Et(),O=Object(a.useRef)(null),v=Object(a.useState)({}),y=Object(l.a)(v,2),w=y[0],C=y[1],I=Object(a.useState)([]),k=Object(l.a)(I,2),S=k[0],R=k[1],T=Object(a.useState)(""),L=Object(l.a)(T,2),E=L[0],D=L[1],B=Object(a.useState)(0),M=Object(l.a)(B,2),z=M[0],U=M[1],A=Object(a.useState)([]),_=Object(l.a)(A,2),V=_[0],q=_[1],$=Object(a.useState)(!1),J=Object(l.a)($,2),K=J[0],X=J[1],Z=Object(a.useState)(""),Q=Object(l.a)(Z,2),ee=Q[0],te=Q[1],ne=Object(a.useState)(!1),ae=Object(l.a)(ne,2),oe=ae[0],ie=ae[1],re=P(),se=re.loading,ce=re.onLoading,le=re.offLoading,de=localStorage.getItem("username"),ue=function(){F.like(de,i).then((function(e){400===e.status?F.dislike(de,i).then((function(e){C(Object(d.a)(Object(d.a)({},w),{},{likes:w.likes-1,isLiked:!1}))})):C(Object(d.a)(Object(d.a)({},w),{},{likes:w.likes+1,isLiked:!0}))}))};document.body.style.overflow=n?"hidden":"auto";var je=function(){c(!s)};return Object(a.useEffect)((function(){n&&(w.id!==i&&(X(!0),H.getPostDetail(de,i).then((function(e){200===e.status&&(X(!1),C(e.data),q(e.data.postImages))}))),w.comments>0&&0===S.length&&W.getComment(i).then((function(e){200===e.status&&R(e.data)})))}),[n,S,w,de,i]),n?Object(G.jsxs)("div",{children:[se?Object(G.jsx)(Se,{}):null,Object(G.jsx)(Ut.a,{className:x.closeIcon}),Object(G.jsx)("div",{className:x.modalOverlay}),Object(G.jsxs)(h.a,{className:x.root,ref:o,children:[Object(G.jsx)(Ht,{isShowing:s,toggleModal:je,auth:w.username===de,privateMode:w.privateMode,onLoading:ce,offLoading:le,modalRef:r,setPost:C,postId:w.id,togglePostDetail:p}),Object(G.jsx)(Gt,{isShowing:u,modalRef:b,setShowingModal:m,auth:oe,commentId:ee,setComments:R}),Object(G.jsxs)(j.a,{container:!0,spacing:0,className:x.postContainer,children:[Object(G.jsxs)(j.a,{item:!0,xs:12,sm:12,md:8,lg:8,style:{position:"relative"},children:[V.length>1&&Object(G.jsx)(ge.a,{onClick:function(){var e=z-1;U(e<0?V.length-1:e)},className:x.slideIcon,style:{left:5}}),V.length>1&&Object(G.jsx)(fe.a,{onClick:function(){U((z+1)%V.length)},className:x.slideIcon,style:{right:5}}),V.length>1&&V.length<=6&&Object(G.jsx)("div",{className:x.button,style:{position:"absolute",bottom:10,left:"50%"},children:V.map((function(e,t){return Object(G.jsx)("span",{className:x.dot,active:t===z?"1":"0"},t)}))}),K?Object(G.jsx)(Ze.a,{variant:"rect",width:"100%",height:"610px"}):V.length<=1?Object(G.jsx)("img",{alt:"postPhoto",src:(null===(t=w.postImages)||void 0===t?void 0:t.length)>0?w.postImages[0].url:null,className:x.postImage}):Object(G.jsx)("img",{alt:"postPhoto",src:V[z].url,className:x.postImage})]}),Object(G.jsxs)(j.a,{item:!0,md:4,lg:4,style:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"},children:[Object(G.jsxs)("div",{className:x.postHeader,children:[K?Object(G.jsx)(Ze.a,{variant:"circle",children:Object(G.jsx)(f.a,{style:{width:30,height:30}})}):Object(G.jsx)(f.a,{alt:"postAvatar",className:x.postAvatar,src:w.avatarUrl?w.avatarUrl:null}),K?Object(G.jsxs)("div",{style:{marginLeft:10,width:"100%"},children:[Object(G.jsx)(Ze.a,{width:"40%"}),Object(G.jsx)(Ze.a,{width:"30%"})]}):Object(G.jsx)(g.a,{variant:"body1",className:x.displayName,children:w.displayName?w.displayName:null}),K?null:Object(G.jsx)(pe.a,{className:x.moreIcon,onClick:function(){je()}})]}),K?Object(G.jsx)("div",{className:x.postComment}):Object(G.jsxs)("div",{className:x.postComment,children:[Object(G.jsxs)("div",{className:x.comment,children:[Object(G.jsx)(f.a,{alt:"postAvatar",className:x.postAvatar,src:w.avatarUrl?w.avatarUrl:null}),Object(G.jsxs)("div",{className:x.commentSection,children:[Object(G.jsxs)("div",{className:x.commentInfo,children:[Object(G.jsx)(g.a,{variant:"body1",className:x.displayName,children:w.displayName?w.displayName:null}),Object(G.jsx)(g.a,{variant:"body1",className:x.commentText,children:w.content?w.content:null})]}),Object(G.jsx)(Ne.a,{date:w.dateCreate,className:x.commentDate,title:null,live:!1})]})]}),S.length>0&&S.map((function(e){return Object(G.jsx)(zt,{comment:e,setCommentShowing:m,setCommentId:te,setAuth:ie,setComments:R},e.id)})),5===S.length&&Object(G.jsx)("div",{className:x.more,children:Object(G.jsx)(At.a,{style:{color:"#8e8e8e",fontSize:25},onClick:function(){var e=S[S.length-1].id;W.getMoreComment(i,e).then((function(e){200===e.status&&R((function(t){return t.concat(e.data)}))}))}})})]}),K?Object(G.jsxs)("div",{style:{flexGrow:.5,paddingLeft:15},children:[Object(G.jsx)(Ze.a,{width:"60%"}),Object(G.jsx)(Ze.a,{width:"80%"}),Object(G.jsx)(Ze.a,{width:"40%"})]}):Object(G.jsxs)("div",{className:x.postInteractSection,children:[Object(G.jsxs)("div",{className:x.interact,children:[w.isLiked?Object(G.jsx)(xe.a,{className:x.icon,style:{fontSize:30,marginRight:10},onClick:ue}):Object(G.jsx)(N.a,{className:x.icon,style:{fontSize:30,marginRight:10},onClick:ue}),Object(G.jsx)(Wt.a,{className:x.icon,style:{fontSize:30},onClick:function(){console.log(O),O.current.focus()}})]}),Object(G.jsx)(g.a,{variant:"body1",className:x.likeText,children:w.likes?w.likes>1?w.likes+" likes":w.likes+" like":"0 like"}),Object(G.jsx)(Ne.a,{date:w.dateCreate,className:x.commentDate,title:null,live:!1})]}),K?null:Object(G.jsxs)("div",{className:x.postCommentSection,children:[Object(G.jsx)(Y.a,{multiline:!0,rowsMax:4,rows:1,placeholder:"Add a comment...",className:x.textField,InputProps:{classes:{input:x.input}},inputRef:O,onChange:function(e){D(e.target.value)},value:E}),Object(G.jsx)(ve.a,{className:x.icon,onClick:function(){""!==E&&(W.comment(de,E,i).then((function(e){R((function(t){return[].concat(Object(he.a)(t),[e.data])}))})),D(""))}})]})]})]})]})]}):null},qt=function(){var e=Pt(),t=Object(a.useRef)(null),n=Object(a.useRef)(null),o=Object(a.useRef)(null),i=Ct(),r=i.gallery,s=i.targetUsername,c=It().galleryDispatch,d=Object(a.useState)(""),u=Object(l.a)(d,2),m=u[0],b=u[1],h=Object(a.useState)(!1),p=Object(l.a)(h,2),g=p[0],f=p[1],x=Object(a.useState)(!1),O=Object(l.a)(x,2),v=O[0],y=O[1],w=T(),N=w.isShowing,C=w.toggle,I=localStorage.getItem("username");return Object(a.useEffect)((function(){var e=function(e){t.current&&!t.current.contains(e.target)&&(C(),f(!1),y(!1),document.body.style.overflow="auto"),n.current&&!n.current.contains(e.target)&&(f(!1),document.body.style.overflow="auto"),o.current&&!o.current.contains(e.target)&&(y(!1),document.body.style.overflow="auto")};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,C]),Object(G.jsxs)("div",{className:e.root,children:[Object(G.jsx)(Vt,{isShowing:N,modalRef:t,postId:m,statusModalRef:n,statusShowing:g,setStatusShowing:f,commentShowing:v,setCommentShowing:y,commentModalRef:o,togglePostDetail:C}),Object(G.jsx)(j.a,{container:!0,className:e.gallery,spacing:3,children:r.length>0?r.map((function(t){return Object(G.jsxs)(j.a,{item:!0,xs:12,md:4,sm:6,lg:4,className:e.galleryItem,onClick:function(){return function(e){C(),b(e)}(t.id)},children:[Object(G.jsx)("div",{className:e.galleryOverlay,children:Object(G.jsx)("img",{alt:"postImage",className:e.galleryImage,src:t.postImages[0].url})}),t.postImages.length>1?Object(G.jsx)("div",{className:e.galleryItemType,children:Object(G.jsx)(Tt.a,{})}):null,Object(G.jsx)("div",{className:e.galleryItemInfo,children:Object(G.jsxs)("ul",{children:[Object(G.jsxs)("li",{children:[Object(G.jsx)(xe.a,{style:{marginRight:5}}),t.likes]}),Object(G.jsxs)("li",{children:[Object(G.jsx)(Lt.a,{style:{marginRight:5}}),t.comments]})]})})]},t.id)})):null}),r.length>=15&&Object(G.jsx)("div",{className:e.loadMore,children:Object(G.jsx)(J.a,{color:"primary",onClick:function(){var e=r[r.length-1].id;H.getMorePostProfile(I,s,e).then((function(e){if(200===e.status)if(e.data.length>0){var t=e.data;c({type:"LOAD_MORE_POST",morePosts:t})}else alert("There are no more posts")}))},children:"Load more"})})]})},Yt=Object(S.a)((function(e){return{root:{}}})),$t=Object(S.a)((function(e){return{root:{},avatarContainer:{backgroundColor:"#2a3f54",padding:10,borderTopLeftRadius:2,borderTopRightRadius:2,display:"flex",alignItems:"center"},avatar:{width:27,height:27,marginRight:10,cursor:"pointer"},name:{fontSize:12,color:"#009688",fontWeight:"bold"},content:{padding:"10px 15px"},text:{fontSize:14},likeComment:{padding:"5px 15px",display:"flex",alignItems:"center",position:"relative"},button:{display:"flex",alignItems:"center",marginRight:10},icon:{marginRight:5,color:"#009688"},comment:{padding:"0 15px",borderTop:"1px solid #cecece",marginTop:10,display:"flex",alignItems:"center"},textField:{marginTop:5,width:"100%","& .MuiInput-underline:after":{borderBottom:"none"},"& .MuiInput-underline:before":{borderBottom:"none"},"&:hover .MuiInput-underline:before":{borderBottom:"none"}},commentButton:{cursor:"pointer"},moreButton:{cursor:"pointer",marginLeft:"auto",color:"#009688"},showMore:{padding:"0 15px"},showMoreButton:{color:"#8e8e8e",background:"0 0",border:0,cursor:"pointer",fontSize:12,fontWeight:"bold",width:"auto",padding:0}}})),Jt=Object(S.a)((function(){return{modalOverlay:{position:"fixed",top:0,left:0,zIndex:99,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},root:{position:"fixed",top:"50vh",left:"50%",width:"400px",zIndex:100,transform:"translate(-50%, -50%)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",borderRadius:15},option:{borderTop:"1px solid #d9d9d9",width:"100%",textAlign:"center",padding:"15px 0",fontSize:14,cursor:"pointer",fontWeight:"bold",display:"flex",alignItems:"center",justifyContent:"center"},iconContainer:{display:"flex",alignItems:"center",flex:"1.1 0 0px"},icon:{marginRight:10},checkIcon:{fontSize:14,marginLeft:5,color:Ce.a[500]}}})),Kt=function(e){var t=e.isShowing,n=e.toggleModal,o=e.postId,i=e.auth,s=e.privateMode,c=e.onLoading,u=e.offLoading,j=e.setPostDetail,m=Jt(),b=Object(a.useRef)(null),p=Object(a.useState)(!1),g=Object(l.a)(p,2),f=g[0],x=g[1],O=Object(a.useState)(!1),v=Object(l.a)(O,2),y=v[0],w=v[1],N=Object(a.useState)(!1),C=Object(l.a)(N,2),I=C[0],k=C[1],S=It().postsDispatch,R=function(e,t){"clickaway"!==t&&(k(!1),w(!1))};return t&&(document.body.style.overflow="hidden"),Object(a.useEffect)((function(){var e=function(e){b.current&&!b.current.contains(e.target)&&(x(!1),n(),document.body.style.overflow="auto")};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[b,n]),t?r.a.createPortal(Object(G.jsxs)("div",{children:[Object(G.jsx)("div",{className:m.modalOverlay}),Object(G.jsxs)(h.a,{className:m.root,ref:b,children:[i?Object(G.jsxs)("div",{style:{width:"100%"},children:[Object(G.jsxs)("div",{className:m.option,style:{color:"#0095f6",borderRadius:15},onClick:function(){c(),n(),H.setPrivate(o).then((function(e){200===e.status&&(j((function(e){return Object(d.a)(Object(d.a)({},e),{},{privateMode:!0})})),u()),document.body.style.overflow="auto"}))},children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"},children:Object(G.jsx)(Te.a,{className:m.icon})}),Object(G.jsxs)("div",{className:m.iconContainer,children:["Private",s&&Object(G.jsx)(Le.a,{className:m.checkIcon})]})]}),Object(G.jsxs)("div",{className:m.option,style:{color:"#0095f6"},onClick:function(){c(),n(),H.setPublic(o).then((function(e){200===e.status&&(j((function(e){return Object(d.a)(Object(d.a)({},e),{},{privateMode:!1})})),u()),document.body.style.overflow="auto"}))},children:[Object(G.jsx)("div",{style:{flex:"1 0 0px",textAlign:"right"},children:Object(G.jsx)(Ee.a,{className:m.icon})}),Object(G.jsxs)("div",{className:m.iconContainer,children:["Public",!s&&Object(G.jsx)(Le.a,{className:m.checkIcon})]})]}),Object(G.jsx)("div",{className:m.option,style:{color:"#ed4956"},onClick:function(){c(),n(),H.deletePostImage(o).then((function(e){200===e.status&&H.deletePost(o).then((function(e){200===e.status&&(S({type:"REMOVE_POST",postId:o}),u())})),document.body.style.overflow="auto"}))},children:"Remove"})]}):f?Object(G.jsx)("div",{className:m.option,style:{borderRadius:15},children:"Please select a problem"}):Object(G.jsx)("div",{className:m.option,style:{color:"#ed4956",borderRadius:15},onClick:function(){x(!0)},children:"Report"}),f?["Nudity","Violence","Harassment","Suicide or Self-injury","False information","Spam","Unauthorized Sales","Hate speech","Terrorism","Gross content","Child Abuse"].map((function(e){return Object(G.jsx)("div",{className:m.option,style:{borderRadius:15,fontWeight:400},onClick:function(t){return function(e,t){var a=localStorage.getItem("username");c(),n(),H.reportPost(o,a,t).then((function(e){200===e.status&&(w(!0),u()),400===e.status&&(k(!0),u()),document.body.style.overflow="auto"}))}(0,e)},children:e},e)})):null,Object(G.jsx)("div",{className:m.option,onClick:function(){n(),document.body.style.overflow="auto"},children:"Cancel"})]})]}),document.body):Object(G.jsxs)("div",{children:[Object(G.jsx)(K.a,{open:y,autoHideDuration:3e3,onClose:R,children:Object(G.jsx)(ee.a,{onClose:R,severity:"success",children:"Success! We will inspect your report!"})}),Object(G.jsx)(K.a,{open:I,autoHideDuration:3e3,onClose:R,children:Object(G.jsx)(ee.a,{onClose:R,severity:"error",children:"You already have reported this post!"})})]})},Xt=Object(S.a)((function(e){return{avatar:{width:27,height:27,marginRight:10,cursor:"pointer"},comment:{display:"flex",padding:"0 15px",alignItems:"flex-start",marginBottom:10},displayName:{fontWeight:"bold",fontSize:14,marginRight:10,textDecoration:"none","&:visited":{color:"inherit"}},timeAgo:{color:"#8e8e8e",fontSize:12,fontWeight:"400",marginRight:5},button:{color:"#8e8e8e",background:"0 0",border:0,cursor:"pointer",fontSize:12,fontWeight:"bold",width:"auto",padding:0,marginLeft:5},moreButton:{marginLeft:"auto",color:"#8e8e8e",cursor:"pointer"},divider:{borderBottom:"1px solid rgba(var(--f52,142,142,142),1)",display:"inline-block",height:0,marginRight:16,verticalAlign:"middle",width:24},showReplyButton:{color:"#8e8e8e",background:"0 0",border:0,cursor:"pointer",fontSize:12,fontWeight:"bold",width:"auto",padding:0},textField:{marginTop:5,width:"100%",padding:0,"& .MuiInput-underline input":{padding:0},"& .MuiInput-underline:after":{borderBottom:"none"},"& .MuiInput-underline:before":{borderBottom:"none"},"&:hover .MuiInput-underline:before":{borderBottom:"none"}},paper:{padding:"2px 15px",borderRadius:"50px",width:"100%"},reply:{display:"flex",alignItems:"flex-start",padding:"0 15px",margin:"10px 0 10px 35px"}}})),Zt=function(e){var t=e.comment,n=e.setComments,o=e.postId,i=Xt(),r=Object(a.useRef)(null),s=Object(a.useState)(!1),c=Object(l.a)(s,2),u=c[0],j=c[1],m=Object(a.useState)(!1),b=Object(l.a)(m,2),p=b[0],x=b[1],O=Object(a.useState)([]),v=Object(l.a)(O,2),y=v[0],w=v[1],N=Object(a.useState)(t.replies>0?"Show "+t.replies+" replies":0===t.replies?"Hide replies":"Show replies"),C=Object(l.a)(N,2),I=C[0],k=C[1],S=Object(a.useState)(""),R=Object(l.a)(S,2),P=R[0],T=R[1],L=Object(a.useState)(!1),E=Object(l.a)(L,2),D=E[0],B=E[1],M=localStorage.getItem("username");return Object(a.useEffect)((function(){t.replies>0&&0===y.length&&W.getReply(t.id).then((function(e){200===e.status&&w(e.data)}));var e=function(e){r.current&&!r.current.contains(e.target)&&B(!1)};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}}),[t,y,r]),Object(G.jsxs)("div",{children:[Object(G.jsx)(Gt,{isShowing:D,setShowingModal:B,modalRef:r,auth:t.username===M,commentId:t.id,setComments:n,postId:o}),Object(G.jsxs)("div",{className:i.comment,children:[Object(G.jsx)(f.a,{alt:"avatar",src:t.userAvatarUrl?t.userAvatarUrl:P,className:i.avatar,onClick:function(){window.location.href=window.location.origin+"/"+t.username}}),Object(G.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[Object(G.jsxs)("div",{style:{display:"flex",position:"relative",flexWrap:"wrap"},children:[Object(G.jsx)("a",{href:"/"+t.username,className:i.displayName,children:t.userDisplayName}),Object(G.jsx)(g.a,{varian:"body1",style:{fontSize:14,wordBreak:"break-word",maxWidth:"80%"},children:t.content}),Object(G.jsx)(pe.a,{className:i.moreButton,onClick:function(e){B(!0)}})]}),Object(G.jsxs)("div",{children:[Object(G.jsx)(Ne.a,{date:t.dateCreate,className:i.timeAgo,title:null,live:!1}),Object(G.jsx)("button",{className:i.button,onClick:function(){j(!u),A.getUserAvatar(M).then((function(e){404===e.status?T(null):T(e.data.path)}))},children:"Reply"})]})]})]}),(null===y||void 0===y?void 0:y.length)>0&&Object(G.jsx)("div",{className:i.reply,children:Object(G.jsxs)("button",{className:i.showReplyButton,onClick:function(){if(y.length<t.replies&&p){var e=y[0].id;W.getMoreReply(t.id,e).then((function(e){if(200===e.status){w((function(t){return e.data.concat(t)}));var n=t.replies-y.length-e.data.length;k(0!==n?"Show more "+n+" replies":"Hide replies")}}))}else y.length===t.replies&&p?(k("Show replies"),x(!1)):(x(!0),y.length===t.replies?k("Hide replies"):k("Show more "+(t.replies-y.length)+" replies"))},children:[Object(G.jsx)("div",{className:i.divider}),Object(G.jsx)("span",{children:I})]})}),p&(null===y||void 0===y?void 0:y.length)>0?null===y||void 0===y?void 0:y.map((function(e){return Object(G.jsxs)("div",{className:i.reply,children:[Object(G.jsx)(f.a,{alt:"avatar",src:e.userAvatarUrl?e.userAvatarUrl:P,className:i.avatar,style:{width:25,height:25},onClick:function(){window.location.href=window.location.origin+"/"+e.username}}),Object(G.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[Object(G.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(G.jsx)("a",{href:"/"+e.username,className:i.displayName,children:e.userDisplayName}),Object(G.jsx)(g.a,{varian:"body1",style:{fontSize:14,overflowWrap:"break-word",maxWidth:"80%"},children:e.content})]}),Object(G.jsx)(Ne.a,{date:e.dateCreate,className:i.timeAgo,title:null,live:!1})]})]},e.id)})):null,u?Object(G.jsxs)("div",{className:i.reply,style:{alignItems:"center"},children:[Object(G.jsx)(f.a,{alt:"avatar",src:P,className:i.avatar,style:{width:25,height:25}}),Object(G.jsx)(h.a,{className:i.paper,children:Object(G.jsx)(Y.a,{className:i.textField,placeholder:"Reply something...",multiline:!0,rows:1,rowsMax:3,onKeyDown:function(e){return function(e){if("Enter"===e.key){e.preventDefault();var a=localStorage.getItem("username"),o=e.target.value,i=e.target.id;W.replyComment(a,o,i).then((function(e){200===e.status&&(t.replies<=3?k("Hide replies"):k("Show more replies"),w([].concat(Object(he.a)(y),[e.data])),n((function(e){return e.map((function(e){return e.id===i?Object(d.a)(Object(d.a)({},e),{},{replies:e.replies+1}):e}))})),j(!1),x(!0))}))}}(e)},id:t.id})})]}):null]})},Qt=function(e){var t=e.post,n=$t(),o=Object(a.useState)(t.likes),i=Object(l.a)(o,2),r=i[0],s=i[1],c=Object(a.useState)(t.isLiked),d=Object(l.a)(c,2),u=d[0],j=d[1],m=Object(a.useState)(""),b=Object(l.a)(m,2),p=b[0],x=b[1],O=Object(a.useState)([]),v=Object(l.a)(O,2),y=v[0],w=v[1],C=Object(a.useState)({}),I=Object(l.a)(C,2),k=I[0],S=I[1],R=t.id,L=localStorage.getItem("username"),E=T(),D=E.isShowing,B=E.toggle,M=P(),z=M.loading,U=M.onLoading,A=M.offLoading,_=It().postsDispatch,V=function(){F.like(L,R).then((function(e){400===e.status?F.dislike(L,R).then((function(e){s(r-1),j(!1)})):(s(r+1),j(!0))}))};return Object(a.useEffect)((function(){0===y.length&&t.comments>0&&W.getComment(R).then((function(e){200===e.status&&w(e.data)})),0===Object.keys(k).length&&H.getPostDetail(L,R).then((function(e){200===e.status&&S(e.data)}))}),[R,y,t,k,L]),Object(G.jsxs)(h.a,{className:n.root,children:[Object(G.jsx)(Kt,{isShowing:D,toggleModal:B,postId:t.id,auth:k.username===L,privateMode:k.privateMode,onLoading:U,offLoading:A,setPostDetail:S}),z?Object(G.jsx)(Se,{}):null,Object(G.jsxs)("div",{className:n.avatarContainer,children:[Object(G.jsx)(f.a,{alt:"avatar",src:k.avatarUrl?k.avatarUrl:null,className:n.avatar,onClick:function(){window.location.href=window.location.origin+"/"+k.username}}),Object(G.jsx)("a",{href:"/"+k.username,style:{textDecoration:"none"},className:n.name,children:k.displayName}),Object(G.jsx)(pe.a,{className:n.moreButton,onClick:B})]}),Object(G.jsx)("div",{className:n.content,children:Object(G.jsx)(g.a,{variant:"body1",className:n.text,children:t.content})}),Object(G.jsxs)("div",{className:n.likeComment,children:[Object(G.jsxs)("div",{className:n.button,children:[u?Object(G.jsx)(xe.a,{className:n.icon,style:{cursor:"pointer"},onClick:V}):Object(G.jsx)(N.a,{className:n.icon,style:{cursor:"pointer"},onClick:V}),Object(G.jsx)(g.a,{style:{color:"#2a3f54",fontWeight:"bold"},children:0===r?r:r>1?r+" likes":r+" like"})]}),Object(G.jsxs)("div",{className:n.button,style:{cursor:"pointer"},children:[Object(G.jsx)(Oe.a,{className:n.icon}),Object(G.jsx)(g.a,{style:{color:"#2a3f54",fontWeight:"bold"},children:0===t.comments?t.comments:t.comments>1?t.comments+" comments":t.comments+" comment"})]})]}),Object(G.jsxs)("div",{style:{marginTop:10},children:[y.length>0&&y.map((function(e,n){return Object(G.jsx)(Zt,{comment:e,setComments:w,index:n,postId:t.id},n)})),y.length<t.comments&&Object(G.jsx)("div",{className:n.showMore,children:Object(G.jsx)("button",{className:n.showMoreButton,onClick:function(){var e=y[y.length-1].id;W.getMoreComment(R,e).then((function(e){200===e.status&&w((function(t){return t.concat(e.data)}))}))},children:Object(G.jsx)("span",{children:"Show more comments"})})})]}),Object(G.jsxs)("div",{className:n.comment,children:[Object(G.jsx)(Y.a,{className:n.textField,placeholder:"Write a comment...",multiline:!0,rows:2,rowsMax:4,onChange:function(e){x(e.target.value)},value:p}),Object(G.jsx)("div",{className:n.commentButton,onClick:function(){""!==p&&(U(),W.comment(L,p,R).then((function(e){200===e.status&&(w((function(t){return[e.data].concat(Object(he.a)(t))})),_({type:"ADD_COMMENT",postId:R}),A())})),x(""))},children:Object(G.jsx)(ve.a,{className:n.icon})})]})]})},en=function(){var e=Yt(),t=Ct().posts;return console.log(t),Object(G.jsx)(j.a,{container:!0,className:e.container,spacing:0,direction:"column",justify:"center",alignItems:"center",children:t.length>0&&t.map((function(e,t){return Object(G.jsx)(j.a,{item:!0,style:{padding:0,marginBottom:100,minWidth:500},xs:12,sm:4,md:4,lg:4,children:Object(G.jsx)(Qt,{post:e})},e.id)}))})},tn=["children","value","index"],nn=function(e){var t=e.children,n=e.value,a=e.index,o=Object(u.a)(e,tn);return Object(G.jsx)("div",Object(d.a)(Object(d.a)({role:"tabpanel",hidden:n!==a,id:"scrollable-auto-tabpanel-".concat(a),"aria-labelledby":"scrollable-auto-tab-".concat(a)},o),{},{children:n===a&&Object(G.jsx)("div",{children:t})}))},an=function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}},on=function(e){var t=e.match,n=ht(),o=Object(a.useState)(0),i=Object(l.a)(o,2),r=i[0],s=i[1];return Object(G.jsxs)("div",{className:n.root,children:[Object(G.jsx)(V,{}),Object(G.jsx)(Rt,{targetUsername:t.params.username}),Object(G.jsxs)("div",{style:{maxWidth:"60%",margin:"0 auto"},children:[Object(G.jsxs)(m.a,{value:r,onChange:function(e,t){s(t)},indicatorColor:"primary",textColor:"primary",centered:!0,TabIndicatorProps:{style:{backgroundColor:"#3f51b5",top:0}},children:[Object(G.jsx)(b.a,Object(d.a)({label:"Gallery"},an(0))),Object(G.jsx)(b.a,Object(d.a)({label:"Post"},an(1)))]}),Object(G.jsx)(nn,{value:r,index:0,children:Object(G.jsx)(qt,{})}),Object(G.jsx)(nn,{value:r,index:1,children:Object(G.jsx)(en,{})})]})]})},rn=["component"],sn=function(e){var t=e.component,n=Object(u.a)(e,rn),a=B.isLoggedIn();return Object(G.jsx)(c.b,Object(d.a)(Object(d.a)({},n),{},{render:function(e){return a?Object(G.jsx)(t,Object(d.a)({},e)):Object(G.jsx)(c.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},cn=n(648),ln=n(647),dn=n(631),un=n(632),jn=n(633),mn=n(630),bn=n(156),hn=n(157),pn=Object(S.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function gn(){var e=pn(),t=Object(mn.a)(),n=Object(bn.a)(),o=Object(a.useState)(),i=Object(l.a)(o,2),r=i[0],s=i[1],c=Object(a.useState)(),d=Object(l.a)(c,2),u=d[0],j=d[1];return Object(G.jsxs)(dn.a,{component:"main",maxWidth:"xs",children:[Object(G.jsx)(un.a,{}),Object(G.jsx)(hn.a,{}),Object(G.jsxs)("div",{className:e.paper,children:[Object(G.jsx)(f.a,{className:e.avatar,children:Object(G.jsx)(jn.a,{})}),Object(G.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(G.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(G.jsx)(Y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:function(e){s(e.target.value)}}),Object(G.jsx)(Y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){j(e.target.value)}}),Object(G.jsx)(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),t({username:r,password:u}).catch((function(){return n("Invalid username or password")}))},children:"Sign In"})]})]})]})}var fn={login:function(e){var t=e.username,n=e.password,a=new Request("/api/Users/authenticate",{method:"POST",body:JSON.stringify({username:t,password:n}),headers:new Headers({"Content-Type":"application/json"})});return fetch(a).then((function(e){if(e.status<200||e.status>=300)throw new Error(e.statusText);return e.json()})).then((function(e){"Admin"===e.roleName&&localStorage.setItem("auth",JSON.stringify(e))})).catch((function(){throw new Error("Network error")}))},checkError:function(e){var t=e.status;return 401===t||403===t?(localStorage.removeItem("auth"),Promise.reject({message:!1})):Promise.resolve()},checkAuth:function(){return localStorage.getItem("auth")?Promise.resolve():Promise.reject({redirectTo:"/login"})},logout:function(){return localStorage.removeItem("auth"),Promise.resolve("/login")},getPermissions:function(){var e=localStorage.getItem("permissions");return e?Promise.resolve(e):Promise.reject()}},xn=n(293),On=n(209),vn=Object(xn.a)("/api/admin",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers=new Headers({Accept:"application/json"}));var n=localStorage.getItem("token");return t.headers.set("Authorization","Bearer ".concat(n)),On.a.fetchJson(e,t)})),yn=n(649),wn=n(650),Nn=n(642),Cn=n(643),In=function(e){return Object(G.jsx)(yn.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(G.jsxs)(wn.a,{rowClick:"show",children:[Object(G.jsx)(Nn.a,{source:"id"}),Object(G.jsx)(Nn.a,{source:"numOfReports"}),Object(G.jsx)(Nn.a,{source:"firtsReporter"}),Object(G.jsx)(Cn.a,{source:"firstReportTime",locales:"fr-FR",showTime:!0})]})}))},kn=n(644),Sn=n(645),Rn=n(639),Pn=n(104),Tn=n(651),Ln=n(656),En=n(663),Dn=n(646),Bn=Object(S.a)((function(e){return{post_id:{display:"inline-block",marginRight:30},content:{display:"inline-block",marginRight:30},date_created:{display:"inline-block"},gallery:{margin:"20px 0"},galleryItem:{position:"relative",cursor:"pointer"},galleryImage:{width:"100%",height:"100%",objectFit:"cover"},table:{"& .MuiFormControl-root":{width:"100%"}}}})),Mn=function(e){var t=e.record,n=Object(bn.a)(),a=Object(Rn.a)();console.log(t);return Object(G.jsxs)(J.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){M.approveReport(t.id).then((function(e){200===e.status?(n("Report Approved","info"),a("/reports")):n("Error","warning")}))},style:{marginRight:10},children:[Object(G.jsx)(kn.a,{color:"primary",style:{paddingRight:"0.5em",color:"green"}}),"Accept"]})},zn=function(e){var t=e.record,n=Object(bn.a)(),a=Object(Rn.a)();return Object(G.jsxs)(J.a,{variant:"outlined",color:"primary",size:"small",onClick:function(){M.rejectReport(t.id).then((function(e){200===e.status?(n("Report Rejected","info"),a("/reports")):n("Error","warning")}))},style:{marginLeft:10},children:[Object(G.jsx)(Sn.a,{color:"primary",style:{paddingRight:"0.5em",color:"red"}}),"Reject"]})},Un=function(e){var t=e.record,n=Bn();return Object(G.jsx)(j.a,{container:!0,className:n.gallery,spacing:0,children:t.postImages&&t.postImages.map((function(e,t){return Object(G.jsx)(j.a,{items:!0,xs:12,md:3,sm:4,lg:3,className:n.galleryItem,children:Object(G.jsx)("div",{children:Object(G.jsx)("img",{alt:"postImage",className:n.galleryImage,src:e.url})})},t)}))})},An=function(e){e.basePath;var t=e.data;e.resource;return Object(G.jsxs)(Pn.a,{children:[Object(G.jsx)(Mn,{record:t}),Object(G.jsx)(zn,{record:t})]})},Wn={list:In,show:function(e){var t=Bn();return Object(G.jsx)(Tn.a,Object(d.a)(Object(d.a)({actions:Object(G.jsx)(An,{})},e),{},{children:Object(G.jsxs)(Ln.a,{children:[Object(G.jsxs)(En.a,{label:"Post Detail",children:[Object(G.jsx)(Nn.a,{label:"Post ID",source:"id",className:t.post_id}),Object(G.jsx)(Nn.a,{label:"Content",source:"content",className:t.content}),Object(G.jsx)(Cn.a,{label:"Date Created",source:"dateCreate",locales:"fr-FR",showTime:!0,className:t.date_created}),Object(G.jsx)(Un,{})]}),Object(G.jsx)(En.a,{label:"Reports Detail",children:Object(G.jsx)(Dn.a,{source:"reports",className:t.table,children:Object(G.jsxs)(wn.a,{children:[Object(G.jsx)(Nn.a,{label:"Report Username",source:"reporterUserName"}),Object(G.jsx)(Nn.a,{label:"Report Reason",source:"reportContent"}),Object(G.jsx)(Cn.a,{label:"Report Time",source:"dateCreated",locales:"fr-FR",showTime:!0})]})})})]})}))}};function Fn(){return Object(G.jsx)(cn.a,{loginPage:gn,authProvider:fn,dataProvider:vn,children:Object(G.jsx)(ln.a,Object(d.a)({name:"reports"},Wn))})}var Hn=function(){return Object(G.jsx)(Nt,{children:Object(G.jsx)(s.a,{children:Object(G.jsxs)(c.d,{children:[Object(G.jsx)(c.b,{path:"/login",component:bt}),Object(G.jsx)(sn,{exact:!0,path:"/",component:tt}),Object(G.jsx)(sn,{exact:!0,path:"/:username",component:on}),Object(G.jsx)(sn,{exact:!0,path:"/accounts/edit",component:ue}),Object(G.jsx)(c.b,{exact:!0,path:"/upico/admin",component:Fn})]})})})},_n=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,664)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),i(e),r(e)}))};r.a.render(Object(G.jsx)(o.a.StrictMode,{children:Object(G.jsx)(Hn,{})}),document.getElementById("root")),_n()}},[[537,1,2]]]);
//# sourceMappingURL=main.de080944.chunk.js.map